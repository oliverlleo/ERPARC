<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>ArchSys - ERP</title>
  <link href="https://fonts.googleapis.com" rel="preconnect" />
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/main.min.css' rel='stylesheet' />
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js'></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  <style type="text/tailwindcss">
    :root {
      --brand-primary: #3B82F6;
      --brand-secondary: #F3F4F6;
      --brand-text-primary: #1F2937;
      --brand-text-secondary: #6B7280;
      --primary-color: #1173d4;
    }

    body {
      font-family: 'Inter', sans-serif;
    }

    .view-container {
        display: none;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
    }
    .view-container.visible {
        display: flex;
        opacity: 1;
    }
    .tab-link.active, .tab-link-financeiro.active, .cliente-tab-link.active, .funcionario-tab-link.active, .fornecedor-tab-link.active {
        color: var(--primary-color);
        border-color: var(--primary-color);
        border-bottom-width: 2px;
    }
    .cliente-tab-link, .funcionario-tab-link, .fornecedor-tab-link {
        /* Applying Tailwind classes directly in CSS is incorrect. This will be moved to the HTML. */
    }
    .login-background {
      background-image: url('login.png');
      background-size: cover;
      background-position: center;
    }
    .status-filter-btn.active {
        background-color: var(--primary-color) !important;
        color: white !important;
        border: 1px solid var(--primary-color) !important;
    }
    .status-filter-btn {
        background-color: #F3F4F6;
        color: #374151;
        border: 1px solid #D1D5DB;
    }
    #notification-sidebar.visible {
        transform: translateX(0);
    }
    .notification-item {
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        padding: 1rem;
        border-bottom: 1px solid #e5e7eb;
    }
    .notification-item:last-child {
        border-bottom: none;
    }
    .notification-icon {
        flex-shrink: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 9999px;
    }
    .notification-icon-info { background-color: #EFF6FF; color: #3B82F6; } /* blue-100, blue-500 */
    .notification-icon-success { background-color: #D1FAE5; color: #10B981; } /* green-100, green-500 */
    .notification-icon-warning { background-color: #FEF3C7; color: #F59E0B; } /* yellow-100, yellow-500 */
    .notification-icon-danger { background-color: #FEE2E2; color: #EF4444; } /* red-100, red-500 */
    .notification-icon-comment { background-color: #EDE9FE; color: #8B5CF6; } /* violet-100, violet-500 */

    .notification-content {
        flex-grow: 1;
    }
    .notification-text {
        font-size: 0.875rem;
        line-height: 1.25rem;
        color: #1f2937;
    }
    .notification-time {
        font-size: 0.75rem;
        line-height: 1rem;
        color: #6b7280;
        margin-top: 0.25rem;
    }
  </style>
</head>

<body class="bg-gray-50">
  <script>
    // Ensure the login page is visible by default for testing and initial load.
    document.getElementById('login-page').classList.add('visible');
  </script>

  <!-- Notification Sidebar -->
  <div id="notification-sidebar" class="fixed top-0 right-0 h-full w-80 bg-white shadow-lg z-50 transform translate-x-full transition-transform duration-300 ease-in-out">
      <div class="flex justify-between items-center p-4 border-b">
          <h2 class="text-xl font-semibold">Notificações</h2>
          <button id="close-notification-sidebar" class="p-2 rounded-full hover:bg-gray-200">
              <span class="material-symbols-outlined">close</span>
          </button>
      </div>
      <div id="notification-list" class="p-4 space-y-4 overflow-y-auto h-[calc(100%-120px)]">
          <!-- Notification items will be dynamically inserted here -->
          <div class="text-center text-gray-500 pt-8">
              <p>Não há notificações no momento.</p>
          </div>
      </div>
      <div class="absolute bottom-0 left-0 w-full p-4 border-t bg-white">
          <a href="#" class="nav-link block text-center text-blue-600 hover:underline" data-target="notifications-page">Ver todas as notificações</a>
      </div>
  </div>

  <!--
  Tailwind JIT safelist:
  bg-green-100 text-green-800
  bg-yellow-100 text-yellow-800
  bg-red-100 text-red-800
  -->

  <!-- Container da Tela de Login -->
  <div id="login-page" class="view-container min-h-screen w-full">
    <div class="hidden lg:block lg:w-1/2 login-background">
      <div class="flex h-full w-full items-end p-12">
        <div class="text-white">
          <h1 class="text-4xl font-bold leading-tight">Projetando o futuro, um projeto de cada vez.</h1>
          <p class="mt-4 text-lg">Seu ERP para a arquitetura moderna.</p>
        </div>
      </div>
    </div>
    <div class="w-full lg:w-1/2 flex items-center justify-center p-6 sm:p-12">
      <div class="w-full max-w-md">
        <div class="flex items-center justify-center mb-8">
          <svg class="h-10 w-10 text-[var(--brand-primary)]" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.8261 30.5736C16.7203 29.8826 20.2244 29.4783 24 29.4783C27.7756 29.4783 31.2797 29.8826 34.1739 30.5736C36.9144 31.2278 39.9967 32.7669 41.3563 33.8352L24.8486 7.36089C24.4571 6.73303 23.5429 6.73303 23.1514 7.36089L6.64374 33.8352C8.00331 32.7669 11.0856 31.2278 13.8261 30.5736Z" fill="currentColor"></path>
            <path clip-rule="evenodd" d="M39.998 35.764C39.9944 35.7463 39.9875 35.7155 39.9748 35.6706C39.9436 35.5601 39.8949 35.4259 39.8346 35.2825C39.8168 35.2403 39.7989 35.1993 39.7813 35.1602C38.5103 34.2887 35.9788 33.0607 33.7095 32.5189C30.9875 31.8691 27.6413 31.4783 24 31.4783C20.3587 31.4783 17.0125 31.8691 14.2905 32.5189C12.0012 33.0654 9.44505 34.3104 8.18538 35.1832C8.17384 35.2075 8.16216 35.233 8.15052 35.2592C8.09919 35.3751 8.05721 35.4886 8.02977 35.589C8.00356 35.6848 8.00039 35.7333 8.00004 35.7388C8.00004 35.739 8 35.7393 8.00004 35.7388C8.00004 35.7641 8.0104 36.0767 8.68485 36.6314C9.34546 37.1746 10.4222 37.7531 11.9291 38.2772C14.9242 39.319 19.1919 40 24 40C28.8081 40 33.0758 39.319 36.0709 38.2772C37.5778 37.7531 38.6545 37.1746 39.3151 36.6314C39.9006 36.1499 39.9857 35.8511 39.998 35.764ZM4.95178 32.7688L21.4543 6.30267C22.6288 4.4191 25.3712 4.41909 26.5457 6.30267L43.0534 32.777C43.0709 32.8052 43.0878 32.8338 43.104 32.8629L41.3563 33.8352C43.104 32.8629 43.1038 32.8626 43.104 32.8629L43.1051 32.865L43.1065 32.8675L43.1101 32.8739L43.1199 32.8918C43.1276 32.906 43.1377 32.9246 43.1497 32.9473C43.1738 32.9925 43.2062 33.0545 43.244 33.1299C43.319 33.2792 43.4196 33.489 43.5217 33.7317C43.6901 34.1321 44 34.9311 44 35.7391C44 37.4427 43.003 38.7775 41.8558 39.7209C40.6947 40.6757 39.1354 41.4464 37.385 42.0552C33.8654 43.2794 29.133 44 24 44C18.867 44 14.1346 43.2794 10.615 42.0552C8.86463 41.4464 7.30529 40.6757 6.14419 39.7209C4.99695 38.7775 3.99999 37.4427 3.99999 35.7391C3.99999 34.8725 4.29264 34.0922 4.49321 33.6393C4.60375 33.3898 4.71348 33.1804 4.79687 33.0311C4.83898 32.9556 4.87547 32.8935 4.9035 32.8471C4.91754 32.8238 4.92954 32.8043 4.93916 32.7889L4.94662 32.777L4.95178 32.7688ZM35.9868 29.004L24 9.77997L12.0131 29.004C12.4661 28.8609 12.9179 28.7342 13.3617 28.6282C16.4281 27.8961 20.0901 27.4783 24 27.4783C27.9099 27.4783 31.5719 27.8961 34.6383 28.6282C35.082 28.7342 35.5339 28.8609 35.9868 29.004Z" fill="currentColor" fill-rule="evenodd"></path>
          </svg>
          <h2 class="ml-3 text-2xl font-bold text-[var(--brand-text-primary)]">ArchSys</h2>
        </div>
        <div class="text-center">
          <h1 class="text-3xl font-bold text-gray-900">Bem-vindo de volta</h1>
          <p class="mt-2 text-gray-600">Por favor, insira seus dados para entrar.</p>
        </div>
        <form id="user-login-form" class="mt-8 space-y-6">
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-[var(--brand-text-primary)]" for="login-empresa">Empresa</label>
                    <div class="mt-1">
                        <select id="login-empresa" name="empresa" required class="form-select block w-full rounded-lg border-gray-300 bg-[var(--brand-secondary)] p-3 shadow-sm focus:border-[var(--brand-primary)] focus:ring focus:ring-[var(--brand-primary)] focus:ring-opacity-50 text-base">
                           <option value="" disabled selected>Selecione a empresa</option>
                           <!-- Options will be populated dynamically -->
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-[var(--brand-text-primary)]" for="login-usuario">Usuário</label>
                    <div class="mt-1">
                        <input id="login-usuario" name="usuario" required class="form-input block w-full rounded-lg border-gray-300 bg-[var(--brand-secondary)] p-3 shadow-sm focus:border-[var(--brand-primary)] focus:ring focus:ring-[var(--brand-primary)] focus:ring-opacity-50 text-base" placeholder="Digite seu usuário" />
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-[var(--brand-text-primary)]" for="login-password">Senha</label>
                    <div class="mt-1">
                        <input autocomplete="current-password" class="form-input block w-full rounded-lg border-gray-300 bg-[var(--brand-secondary)] p-3 shadow-sm focus:border-[var(--brand-primary)] focus:ring focus:ring-[var(--brand-primary)] focus:ring-opacity-50 text-base" id="login-password" name="password" placeholder="Digite sua senha" required type="password" />
                    </div>
                </div>
            </div>
            <div>
                <button class="group relative flex w-full justify-center rounded-lg border border-transparent bg-[var(--brand-primary)] py-3 px-4 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors" type="submit">
                    Entrar
                </button>
            </div>
            <div id="user-login-error" class="text-red-500 text-sm text-center"></div>
        </form>
        <div class="mt-4 text-center">
            <a href="#" id="admin-login-link" class="text-sm text-gray-600 hover:text-[var(--primary-color)]">Acesso do Administrador</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Container da Tela Principal (Dashboard) -->
  <div id="main-page" class="view-container min-h-screen w-full">
     <div class="relative flex size-full min-h-screen flex-col group/design-root w-full">
        <div class="layout-container flex h-full grow flex-col w-full">
            <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-gray-200 bg-white px-10 py-3">
                <a href="#" class="flex items-center gap-4 text-gray-800 nav-link" data-target="main-page">
                    <div class="size-8 text-[var(--primary-color)]">
                        <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M4 8L24 4L44 8L24 12L4 8Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path><path d="M4 24L24 20L44 24L24 28L4 24Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path><path d="M4 40L24 36L44 40L24 44L4 40Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path></svg>
                    </div>
                    <h2 class="text-gray-800 text-lg font-semibold leading-tight tracking-[-0.015em]">ArchSys</h2>
                </a>
                <nav class="flex items-center gap-8">
                    <a class="nav-link text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#" data-target="main-page">Painel</a>
                    <a class="nav-link text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#" data-target="cadastros-page">Cadastros</a>
                    <a class="text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#">Compras</a>
                    <div class="relative">
                        <button id="financeiro-nav-link" class="text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors flex items-center gap-1">
                            <span>Financeiro</span>
                            <span class="material-symbols-outlined text-base">expand_more</span>
                        </button>
                        <div id="financeiro-dropdown" class="hidden absolute mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20">
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="contas-a-pagar-page">Contas a Pagar</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="contas-a-receber-page">Contas a Receber</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="fluxo-de-caixa-page">Fluxo de Caixa</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="movimentacao-bancaria-page">Conciliação Bancária</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="relatorios-page">Relatórios</a>
                        </div>
                    </div>
                    <a class="text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#">Vendas</a>
                </nav>
                 <div class="flex items-center gap-4">
                    <button id="notification-bell-main" class="relative rounded-full p-2 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]">
                        <span class="material-symbols-outlined text-gray-600">notifications</span>
                        <span id="notification-indicator-main" class="hidden absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"></span>
                    </button>
                    <div class="relative">
                        <button id="profile-button" class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" style='background-image: url("https://placehold.co/40x40/E2E8F0/4A5568?text=U");'></button>
                        <div id="profile-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10">
                            <div class="px-4 py-2 text-sm text-gray-700 border-b">
                                <p class="font-medium">Logado como:</p>
                                <p id="user-email" class="truncate"></p>
                            </div>
                            <a href="#" id="logout-button" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sair</a>
                        </div>
                    </div>
                </div>
            </header>
            <main class="flex-1 px-10 py-8">
                <div class="layout-content-container mx-auto flex max-w-7xl flex-col gap-8">
                    <div class="flex flex-col gap-2">
                        <h1 class="text-gray-900 text-3xl font-bold leading-tight tracking-tight">Painel</h1>
                        <p class="text-gray-600 text-base font-normal leading-normal">Visão geral dos principais indicadores e módulos do sistema.</p>
                    </div>
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-gray-900 text-xl font-semibold leading-tight tracking-tight">Indicadores Financeiros</h2>
                        <div>
                            <select id="dashboard-financeiro-selector" class="form-select rounded-lg border-gray-300 bg-white p-2 shadow-sm focus:border-[var(--brand-primary)] focus:ring focus:ring-[var(--brand-primary)] focus:ring-opacity-50 text-base">
                                <option value="provisoes" selected>Provisões</option>
                                <option value="a_pagar">A Pagar</option>
                                <option value="a_receber">A Receber</option>
                                <option value="movimentacoes">Movimentações</option>
                            </select>
                        </div>
                    </div>

                    <!-- Container for all financial views -->
                    <div>
                        <!-- Provisões View (Visible by default) -->
                        <div id="financeiro-provisoes-view" class="dashboard-financeiro-view">
                            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
                                <!-- Card: Provisão a Pagar -->
                                <div class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-yellow-500"> event_upcoming </span>
                                        <p class="text-gray-800 text-base font-medium leading-normal">Provisão a Pagar</p>
                                    </div>
                                    <p id="dashboard-provisao-a-pagar" class="text-gray-900 text-3xl font-bold leading-tight">R$ 0,00</p>
                                </div>
                                <!-- Card: Provisão a Receber -->
                                <div class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-blue-500"> event_available </span>
                                        <p class="text-gray-800 text-base font-medium leading-normal">Provisão a Receber</p>
                                    </div>
                                    <p id="dashboard-provisao-a-receber" class="text-gray-900 text-3xl font-bold leading-tight">R$ 0,00</p>
                                </div>
                                <!-- Card: Saldo Projetado (Provisões) -->
                                <div class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-gray-500"> account_balance_wallet </span>
                                        <p class="text-gray-800 text-base font-medium leading-normal">Saldo Projetado</p>
                                    </div>
                                    <p id="dashboard-provisao-saldo" class="text-gray-900 text-3xl font-bold leading-tight">R$ 0,00</p>
                                </div>
                            </div>
                        </div>

                        <!-- A Pagar View (Hidden) -->
                        <div id="financeiro-a-pagar-view" class="dashboard-financeiro-view hidden">
                            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
                                <div id="dashboard-pagar-total-mes-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm cursor-pointer hover:bg-gray-100 transition-colors">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-yellow-500"> calendar_month </span>
                                        <p class="text-gray-800 text-base font-medium leading-normal">Total a Pagar no Mês</p>
                                    </div>
                                    <p id="dashboard-pagar-total-mes" class="text-gray-900 text-3xl font-bold leading-tight">R$ 0,00</p>
                                </div>
                                <div id="dashboard-pagar-pago-mes-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm cursor-pointer hover:bg-gray-100 transition-colors">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-green-500"> check_circle </span>
                                        <p class="text-gray-800 text-base font-medium leading-normal">Total Pago no Mês</p>
                                    </div>
                                    <p id="dashboard-pagar-pago-mes" class="text-gray-900 text-3xl font-bold leading-tight">R$ 0,00</p>
                                </div>
                                <div id="dashboard-pagar-vencidas-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm cursor-pointer hover:bg-gray-100 transition-colors">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-red-500"> error </span>
                                        <p class="text-gray-800 text-base font-medium leading-normal">Contas Vencidas</p>
                                    </div>
                                    <p id="dashboard-pagar-vencidas" class="text-red-600 text-3xl font-bold leading-tight">R$ 0,00</p>
                                </div>
                            </div>
                        </div>

                        <!-- A Receber View (Hidden) -->
                        <div id="financeiro-a-receber-view" class="dashboard-financeiro-view hidden">
                           <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
                                <div id="dashboard-receber-total-mes-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm cursor-pointer hover:bg-gray-100 transition-colors">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-blue-500"> event_available </span>
                                        <p class="text-gray-800 text-base font-medium leading-normal">Total a Receber no Mês</p>
                                    </div>
                                    <p id="dashboard-receber-total-mes" class="text-gray-900 text-3xl font-bold leading-tight">R$ 0,00</p>
                                </div>
                                <div id="dashboard-receber-recebido-mes-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm cursor-pointer hover:bg-gray-100 transition-colors">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-green-500"> price_check </span>
                                        <p class="text-gray-800 text-base font-medium leading-normal">Total Recebido no Mês</p>
                                    </div>
                                    <p id="dashboard-receber-recebido-mes" class="text-gray-900 text-3xl font-bold leading-tight">R$ 0,00</p>
                                </div>
                                <div id="dashboard-receber-vencidos-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm cursor-pointer hover:bg-gray-100 transition-colors">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-orange-500"> warning </span>
                                        <p class="text-gray-800 text-base font-medium leading-normal">Títulos Vencidos</p>
                                    </div>
                                    <p id="dashboard-receber-vencidos" class="text-orange-600 text-3xl font-bold leading-tight">R$ 0,00</p>
                                </div>
                            </div>
                        </div>

                        <!-- Movimentações View (Hidden) -->
                        <div id="financeiro-movimentacoes-view" class="dashboard-financeiro-view hidden">
                            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
                                <div class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-red-500"> arrow_circle_up </span>
                                        <p class="text-gray-800 text-base font-medium leading-normal">Saídas</p>
                                    </div>
                                    <p id="dashboard-mov-saidas" class="text-red-600 text-3xl font-bold leading-tight">R$ 0,00</p>
                                </div>
                                <div class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-green-500"> arrow_circle_down </span>
                                        <p class="text-gray-800 text-base font-medium leading-normal">Entradas</p>
                                    </div>
                                    <p id="dashboard-mov-entradas" class="text-green-600 text-3xl font-bold leading-tight">R$ 0,00</p>
                                </div>
                                <div class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-gray-500"> account_balance </span>
                                        <p class="text-gray-800 text-base font-medium leading-normal">Saldo em Conta</p>
                                    </div>
                                    <p id="dashboard-mov-saldo" class="text-gray-900 text-3xl font-bold leading-tight">R$ 0,00</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                      <h2 class="text-gray-900 text-xl font-semibold leading-tight tracking-tight mb-4">Módulos</h2>
                      <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
                        <div class="flex items-center gap-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-shadow hover:shadow-md">
                          <div class="flex-1">
                            <p class="text-gray-800 text-lg font-semibold leading-tight">Cadastros</p>
                            <p class="text-gray-600 text-sm font-normal leading-normal mt-1 mb-4">Gerencie seus clientes, fornecedores, produtos e serviços.</p>
                            <a class="nav-link inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]" href="#" data-target="cadastros-page"> Acessar </a>
                          </div>
                          <div class="hidden h-32 w-48 flex-shrink-0 bg-cover bg-center rounded-md sm:block" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDQXtwWaqx7ezi2bjKi9ugj7Biy6hyw3N0Ks4L31cK8v6EcjjeIPSrwv720ad4UxVpx6xBRivD8gwIuzju0E1ETtzAbqYc8oEkIYAKFvywrEwTlR4KRg84dJFF209ewLdnxcmNn_CtkIejkV6LLUE4uTtsZJGXVQz-4gLR0-fNz9A9NuNG0b475ys_yqTDZtwPd4RFCoVxCQEfr57CU7BS-uZJZwEpdkWKE6RX7Nfxh8SjcxK-6McZGMAL2EQSolsdWovrMVLtaiWeH");'></div>
                        </div>
                        <div class="flex items-center gap-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-shadow hover:shadow-md">
                          <div class="flex-1">
                            <p class="text-gray-800 text-lg font-semibold leading-tight">Compras</p>
                            <p class="text-gray-600 text-sm font-normal leading-normal mt-1 mb-4">Controle suas compras, pedidos e recebimentos de materiais.</p>
                            <a class="inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]" href="#"> Acessar </a>
                          </div>
                          <div class="hidden h-32 w-48 flex-shrink-0 bg-cover bg-center rounded-md sm:block" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCRfgZVOBXSgYtv4bX45OPD0l9q_NSImBv2eL6fzb9b8faIodKsplwhEDGJrOdzuI-0cmACUrOlqQzwN--iOpz6gFR9GvVNPVlr0mg7C6yk1CKiJYgcB3zKmOUW6VqCIzR9KfMlcwz7danWgt4MaE1qGnBEggYHG167ArDem9OEm-6WuLKVPB3nVApSPAFuEF1pNN6v_pH0ufz6fmIoFu8Yloh2KTUye2op3xHE1IHJUZSNEjOGcc9l_GUH8cLST63CUHqsCCPkIRzi");'></div>
                        </div>
                        <div class="flex items-center gap-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-shadow hover:shadow-md">
                          <div class="flex-1">
                            <p class="text-gray-800 text-lg font-semibold leading-tight">Financeiro</p>
                            <p class="text-gray-600 text-sm font-normal leading-normal mt-1 mb-4">Acompanhe seu fluxo de caixa, contas a pagar e receber.</p>
                            <a class="nav-link inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]" href="#" data-target="contas-a-pagar-page"> Acessar </a>
                          </div>
                          <div class="hidden h-32 w-48 flex-shrink-0 bg-cover bg-center rounded-md sm:block" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCu5YUQJU2O0LhHTLt4ly2-Ach75kalQbyg8Ytn4RoYxTDEEx1RtdTaziC62QYVa5WMi7R4tSNwwJur56xmdGI4WZfJ7s6TOoUhWOKA2-0NRTt8jChzRyMs55QV4kUDHcxKbYbs2LQjvNXl_i9GxdqHp_CP7vy3E1msz_ZRpEVlteAAZxODhVIVjzwYeDqqDAXoQxeGUy68t-_igunBtJc2PepF2PJO65HThfJRi1K14MAjLXM2-AQ1TIpYwZCsM-jT0ak975Jfnu3a");'></div>
                        </div>
                        <div class="flex items-center gap-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-shadow hover:shadow-md">
                          <div class="flex-1">
                            <p class="text-gray-800 text-lg font-semibold leading-tight">Vendas</p>
                            <p class="text-gray-600 text-sm font-normal leading-normal mt-1 mb-4">Gerencie suas propostas, orçamentos e contratos de projetos.</p>
                            <a class="inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]" href="#"> Acessar </a>
                          </div>
                          <div class="hidden h-32 w-48 flex-shrink-0 bg-cover bg-center rounded-md sm:block" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCHwEeOGxpFtZRq_vB3s-Glt_RZPJdlaA1nZDBIXaeMEiPKoXizREavzEF3yQS6XV4QnDyhDJcJgHFxtowY_focVhtS99MG7tqO6IXegUmVswZmb6ygvGGeB9J91q3MPOQgSn1Cp4zkl0gZX7bluIIOyyiK6ZTvtObXGwVw68T6w5kk6TDf0KKCdiUJiKHVQmOLhPb5fhksHOXy94neNkJ5d_xsctvPpkSAzOj8aL6riWrNKDIuGHMM-wHOOBY8_kjeNzv0z0H4eLTb");'></div>
                        </div>
                      </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
  </div>

  <!-- Container da Tela de Cadastros -->
  <div id="cadastros-page" class="view-container min-h-screen w-full">
    <div class="relative flex size-full min-h-screen flex-col group/design-root w-full">
        <div class="layout-container flex h-full grow flex-col w-full">
            <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-gray-200 bg-white px-10 py-3">
                <a href="#" class="flex items-center gap-4 text-gray-800 nav-link" data-target="main-page">
                    <div class="size-8 text-[var(--primary-color)]">
                        <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M4 8L24 4L44 8L24 12L4 8Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path><path d="M4 24L24 20L44 24L24 28L4 24Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path><path d="M4 40L24 36L44 40L24 44L4 40Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path></svg>
                    </div>
                    <h2 class="text-gray-800 text-lg font-semibold leading-tight tracking-[-0.015em]">ArchSys</h2>
                </a>
                <nav class="flex items-center gap-8">
                    <a class="nav-link text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#" data-target="main-page">Painel</a>
                    <a class="nav-link text-[var(--primary-color)] text-sm font-medium leading-normal" href="#" data-target="cadastros-page">Cadastros</a>
                    <a class="text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#">Compras</a>
                    <div class="relative">
                        <button id="financeiro-nav-link-cadastros" class="text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors flex items-center gap-1">
                            <span>Financeiro</span>
                            <span class="material-symbols-outlined text-base">expand_more</span>
                        </button>
                        <div id="financeiro-dropdown-cadastros" class="hidden absolute mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20">
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="contas-a-pagar-page">Contas a Pagar</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="contas-a-receber-page">Contas a Receber</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="fluxo-de-caixa-page">Fluxo de Caixa</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="movimentacao-bancaria-page">Conciliação Bancária</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="relatorios-page">Relatórios</a>
                        </div>
                    </div>
                    <a class="text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#">Vendas</a>
                </nav>
                 <div class="flex items-center gap-4">
                    <button id="notification-bell-cadastros" class="relative rounded-full p-2 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]">
                        <span class="material-symbols-outlined text-gray-600">notifications</span>
                        <span id="notification-indicator-cadastros" class="hidden absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"></span>
                    </button>
                    <div class="relative">
                        <button id="profile-button-cadastros" class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" style='background-image: url("https://placehold.co/40x40/E2E8F0/4A5568?text=U");'></button>
                        <div id="profile-dropdown-cadastros" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10">
                            <div class="px-4 py-2 text-sm text-gray-700 border-b">
                                <p class="font-medium">Logado como:</p>
                                <p id="user-email-cadastros" class="truncate"></p>
                            </div>
                            <a href="#" id="logout-button-cadastros" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sair</a>
                        </div>
                    </div>
                </div>
            </header>
            <main class="flex-1 px-10 py-8">
                <div class="layout-content-container mx-auto flex max-w-7xl flex-col gap-8">
                    <div class="flex flex-col gap-2">
                        <h1 class="text-gray-900 text-3xl font-bold leading-tight tracking-tight">Módulo de Cadastros</h1>
                        <p class="text-gray-600 text-base font-normal leading-normal">Gerencie os cadastros essenciais para o funcionamento do sistema.</p>
                    </div>
                    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4">
                        <a id="gerais-card-link" class="block rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-all hover:shadow-md hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]" href="#">
                            <div class="flex flex-col gap-3 items-center text-center">
                                <span class="material-symbols-outlined text-4xl text-gray-500"> settings </span>
                                <h3 class="text-gray-800 text-lg font-semibold leading-tight">Gerais</h3>
                                <p class="text-gray-600 text-sm">Empresas, usuários, perfis de acesso.</p>
                            </div>
                        </a>
                        <a id="comerciais-card-link" class="block rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-all hover:shadow-md hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]" href="#">
                            <div class="flex flex-col gap-3 items-center text-center">
                                <span class="material-symbols-outlined text-4xl text-gray-500"> business_center </span>
                                <h3 class="text-gray-800 text-lg font-semibold leading-tight">Comerciais e Logísticos</h3>
                                <p class="text-gray-600 text-sm">Clientes, fornecedores, produtos, serviços.</p>
                            </div>
                        </a>
                        <a id="financeiros-card-link" class="block rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-all hover:shadow-md hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]" href="#">
                            <div class="flex flex-col gap-3 items-center text-center">
                                <span class="material-symbols-outlined text-4xl text-gray-500"> account_balance </span>
                                <h3 class="text-gray-800 text-lg font-semibold leading-tight">Financeiros e Contábeis</h3>
                                <p class="text-gray-600 text-sm">Contas bancárias, planos de contas, impostos.</p>
                            </div>
                        </a>
                        <a id="rh-card-link" class="block rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-all hover:shadow-md hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]" href="#">
                            <div class="flex flex-col gap-3 items-center text-center">
                                <span class="material-symbols-outlined text-4xl text-gray-500"> group </span>
                                <h3 class="text-gray-800 text-lg font-semibold leading-tight">Recursos Humanos</h3>
                                <p class="text-gray-600 text-sm">Funcionários, cargos, salários.</p>
                            </div>
                        </a>
                    </div>

                    <!-- Seção de Cadastro Gerais (inicia oculta) -->
                    <div id="gerais-cadastro-section" class="hidden mt-8">
                      <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm w-full">
                        <div class="flex justify-between items-center mb-4 border-b border-gray-200 pb-4">
                            <h2 class="text-gray-900 text-2xl font-bold leading-tight tracking-tight">Cadastros Gerais</h2>
                            <button id="close-gerais-cadastro" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                                <span class="material-symbols-outlined text-gray-600">close</span>
                            </button>
                        </div>

                        <!-- Abas/Tabs para navegação -->
                        <div class="border-b border-gray-200">
                            <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                                <a href="#" class="tab-link active border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-tab="empresas">Empresas</a>
                                <a href="#" class="tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-tab="usuarios">Usuários</a>
                                <a href="#" class="tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-tab="perfis">Acessos de Usuário</a>
                            </nav>
                        </div>

                        <!-- Conteúdo das Abas -->
                        <div class="mt-6">
                            <!-- Tab: Empresas -->
                            <div id="empresas-tab" class="tab-content">
                                <form id="empresa-form">
                                    <input type="hidden" id="empresa-id">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700" for="empresa-nome">Nome da Empresa</label>
                                            <input type="text" id="empresa-nome" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[var(--primary-color)] focus:ring-[var(--primary-color)]" required>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700" for="empresa-cnpj">CNPJ</label>
                                            <input type="text" id="empresa-cnpj" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[var(--primary-color)] focus:ring-[var(--primary-color)]" required>
                                        </div>
                                    </div>
                                    <div id="empresa-form-feedback" class="text-sm mt-4"></div>
                                    <div class="flex justify-end pt-4">
                                        <button type="submit" class="inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]">Salvar Empresa</button>
                                    </div>
                                </form>
                                <div class="mt-8 border-t pt-6">
                                    <h3 class="text-lg font-medium text-gray-900 mb-4">Empresas Cadastradas</h3>
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome da Empresa</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">CNPJ</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Código</th>
                                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="empresas-table-body" class="bg-white divide-y divide-gray-200">
                                                <!-- Linhas da tabela serão inseridas aqui -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Tab: Usuários -->
                            <div id="usuarios-tab" class="tab-content hidden">
                                <form id="usuario-form">
                                    <input type="hidden" id="usuario-id">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700" for="usuario-funcionario-select">Funcionário</label>
                                            <select id="usuario-funcionario-select" required class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                <option value="" disabled selected>Selecione um funcionário</option>
                                                <!-- Options populated by JS from 'funcionarios' collection -->
                                            </select>
                                        </div>
                                    </div>
                                    <div id="usuario-form-feedback" class="text-sm mt-4"></div>
                                    <div class="flex justify-end pt-4">
                                        <button type="submit" class="inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm">Criar Usuário</button>
                                    </div>
                                </form>
                                <div class="mt-8 border-t pt-6">
                                    <h3 class="text-lg font-medium text-gray-900 mb-4">Usuários do Sistema</h3>
                                    <div class="overflow-x-auto">
                                         <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome do Funcionário</th>
                                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="usuarios-table-body" class="bg-white divide-y divide-gray-200"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Tab: Acessos de Usuário -->
                            <div id="perfis-tab" class="tab-content hidden">
                                 <form id="perfil-form" >
                                     <input type="hidden" id="perfil-id">
                                     <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700" for="acesso-usuario-select">Usuário do Sistema</label>
                                             <select id="acesso-usuario-select" required class="form-select mt-1 block w-full">
                                                <option value="" disabled selected>Selecione um usuário</option>
                                                <!-- Options populated by JS from 'systemUsers' -->
                                            </select>
                                        </div>
                                         <div>
                                            <label class="block text-sm font-medium text-gray-700" for="acesso-login-nome">Nome de Login</label>
                                            <input type="text" id="acesso-login-nome" class="form-input mt-1 block w-full" required>
                                        </div>
                                    </div>
                                    <div id="perfil-form-feedback" class="text-sm mt-4"></div>
                                    <div class="flex justify-end pt-4">
                                        <button id="perfil-form-button" type="submit" class="inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm">Criar Acesso</button>
                                    </div>
                                </form>
                                <div class="mt-8 border-t pt-6">
                                    <h3 class="text-lg font-medium text-gray-900 mb-4">Acessos Criados</h3>
                                    <div class="overflow-x-auto">
                                         <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Login</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Usuário (Funcionário)</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Senha Temporária</th>
                                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="perfis-table-body" class="bg-white divide-y divide-gray-200"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                      </div>
                    </div>

                    <!-- Seção de Cadastro Comerciais e Logísticos (inicia oculta) -->
                    <div id="comerciais-cadastro-section" class="hidden mt-8">
                      <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm w-full">
                        <div class="flex justify-between items-center mb-4 border-b border-gray-200 pb-4">
                            <h2 class="text-gray-900 text-2xl font-bold leading-tight tracking-tight">Comerciais e Logísticos</h2>
                            <button id="close-comerciais-cadastro" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                                <span class="material-symbols-outlined text-gray-600">close</span>
                            </button>
                        </div>

                        <!-- Abas/Tabs para navegação -->
                        <div class="border-b border-gray-200">
                            <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                                <a href="#" class="tab-link-comercial active" data-tab-comercial="fornecedores">Fornecedores</a>
                                <a href="#" class="tab-link-comercial" data-tab-comercial="clientes">Clientes</a>
                                <a href="#" class="tab-link-comercial" data-tab-comercial="servicos">Serviços</a>
                            </nav>
                        </div>

                        <!-- Conteúdo das Abas -->
                        <div class="mt-6">
                            <!-- Tab: Fornecedores -->
                            <div id="fornecedores-tab-comercial" class="tab-content-comercial">
                                <form id="fornecedor-form" class="space-y-6">
                                    <input type="hidden" id="fornecedor-id">
                                    <!-- Abas do Formulário de Fornecedor -->
                                    <div class="border-b border-gray-200">
                                        <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                                            <a href="#" class="fornecedor-tab-link active border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-fornecedor-tab="fornecedor-dados-principais">Dados Principais</a>
                                            <a href="#" class="fornecedor-tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-fornecedor-tab="fornecedor-contato">Contato</a>
                                            <a href="#" class="fornecedor-tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-fornecedor-tab="fornecedor-endereco">Endereço</a>
                                            <a href="#" class="fornecedor-tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-fornecedor-tab="fornecedor-financeiro">Financeiro e Compra</a>
                                        </nav>
                                    </div>

                                    <div class="pt-4">
                                        <!-- Tab: Dados Principais -->
                                        <div id="fornecedor-dados-principais-tab" class="fornecedor-tab-content space-y-4">
                                            <div>
                                                <label for="fornecedor-tipo-pessoa" class="block text-sm font-medium text-gray-700">Tipo de Pessoa</label>
                                                <select id="fornecedor-tipo-pessoa" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                    <option value="juridica">Pessoa Jurídica</option>
                                                    <option value="fisica">Pessoa Física</option>
                                                </select>
                                            </div>
                                            <div id="fornecedor-pessoa-juridica-fields" class="space-y-4">
                                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                    <div><label for="fornecedor-razao-social" class="block text-sm font-medium text-gray-700">Razão Social</label><input type="text" id="fornecedor-razao-social" class="form-input mt-1 block w-full"></div>
                                                    <div><label for="fornecedor-nome-fantasia" class="block text-sm font-medium text-gray-700">Nome Fantasia</label><input type="text" id="fornecedor-nome-fantasia" class="form-input mt-1 block w-full"></div>
                                                </div>
                                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                    <div><label for="fornecedor-cnpj" class="block text-sm font-medium text-gray-700">CNPJ</label><input type="text" id="fornecedor-cnpj" class="form-input mt-1 block w-full"></div>
                                                    <div><label for="fornecedor-inscricao" class="block text-sm font-medium text-gray-700">Inscrição Estadual / Municipal</label><input type="text" id="fornecedor-inscricao" class="form-input mt-1 block w-full"></div>
                                                </div>
                                            </div>
                                            <div id="fornecedor-pessoa-fisica-fields" class="hidden space-y-4">
                                                <div><label for="fornecedor-nome-completo" class="block text-sm font-medium text-gray-700">Nome Completo</label><input type="text" id="fornecedor-nome-completo" class="form-input mt-1 block w-full"></div>
                                                <div><label for="fornecedor-cpf" class="block text-sm font-medium text-gray-700">CPF</label><input type="text" id="fornecedor-cpf" class="form-input mt-1 block w-full"></div>
                                            </div>
                                        </div>
                                        <!-- Tab: Contato -->
                                        <div id="fornecedor-contato-tab" class="fornecedor-tab-content hidden space-y-4">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div><label for="fornecedor-telefone" class="block text-sm font-medium text-gray-700">Telefone Principal</label><input type="tel" id="fornecedor-telefone" class="form-input mt-1 block w-full"></div>
                                                <div><label for="fornecedor-email" class="block text-sm font-medium text-gray-700">E-mail Principal</label><input type="email" id="fornecedor-email" class="form-input mt-1 block w-full"></div>
                                            </div>
                                            <div><label for="fornecedor-website" class="block text-sm font-medium text-gray-700">Website</label><input type="url" id="fornecedor-website" class="form-input mt-1 block w-full"></div>
                                            <div><label for="fornecedor-contato-principal" class="block text-sm font-medium text-gray-700">Vendedor/Contato Principal (Nome, e-mail, telefone)</label><input type="text" id="fornecedor-contato-principal" class="form-input mt-1 block w-full"></div>
                                        </div>
                                        <!-- Tab: Endereço -->
                                        <div id="fornecedor-endereco-tab" class="fornecedor-tab-content hidden space-y-4">
                                             <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                                <div><label for="fornecedor-cep" class="block text-sm font-medium text-gray-700">CEP</label><input type="text" id="fornecedor-cep" class="form-input mt-1 block w-full"></div>
                                                <div class="col-span-2"><label for="fornecedor-logradouro" class="block text-sm font-medium text-gray-700">Logradouro</label><input type="text" id="fornecedor-logradouro" class="form-input mt-1 block w-full"></div>
                                            </div>
                                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                                <div><label for="fornecedor-numero" class="block text-sm font-medium text-gray-700">Número</label><input type="text" id="fornecedor-numero" class="form-input mt-1 block w-full"></div>
                                                <div><label for="fornecedor-complemento" class="block text-sm font-medium text-gray-700">Complemento</label><input type="text" id="fornecedor-complemento" class="form-input mt-1 block w-full"></div>
                                                <div><label for="fornecedor-bairro" class="block text-sm font-medium text-gray-700">Bairro</label><input type="text" id="fornecedor-bairro" class="form-input mt-1 block w-full"></div>
                                            </div>
                                             <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div><label for="fornecedor-cidade" class="block text-sm font-medium text-gray-700">Cidade</label><input type="text" id="fornecedor-cidade" class="form-input mt-1 block w-full"></div>
                                                <div><label for="fornecedor-estado" class="block text-sm font-medium text-gray-700">Estado (UF)</label><input type="text" id="fornecedor-estado" class="form-input mt-1 block w-full"></div>
                                            </div>
                                        </div>
                                        <!-- Tab: Financeiro e Compra -->
                                        <div id="fornecedor-financeiro-tab" class="fornecedor-tab-content hidden space-y-4">
                                            <h4 class="text-md font-semibold text-gray-700">Informações Bancárias</h4>
                                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                                <div><label for="fornecedor-banco" class="block text-sm font-medium text-gray-700">Banco</label><input type="text" id="fornecedor-banco" class="form-input mt-1 block w-full"></div>
                                                <div><label for="fornecedor-agencia" class="block text-sm font-medium text-gray-700">Agência</label><input type="text" id="fornecedor-agencia" class="form-input mt-1 block w-full"></div>
                                                <div><label for="fornecedor-conta" class="block text-sm font-medium text-gray-700">Conta</label><input type="text" id="fornecedor-conta" class="form-input mt-1 block w-full"></div>
                                            </div>
                                            <div><label for="fornecedor-pix" class="block text-sm font-medium text-gray-700">PIX</label><input type="text" id="fornecedor-pix" class="form-input mt-1 block w-full"></div>
                                            <h4 class="text-md font-semibold text-gray-700 pt-4 border-t">Condições de Compra</h4>
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div><label for="fornecedor-condicao-pagamento" class="block text-sm font-medium text-gray-700">Condição de Pagamento Padrão</label><input type="text" id="fornecedor-condicao-pagamento" class="form-input mt-1 block w-full"></div>
                                                <div><label for="fornecedor-prazo-entrega" class="block text-sm font-medium text-gray-700">Prazo de Entrega Padrão (dias)</label><input type="number" id="fornecedor-prazo-entrega" class="form-input mt-1 block w-full"></div>
                                            </div>
                                            <div><label for="fornecedor-obs" class="block text-sm font-medium text-gray-700">Observações</label><textarea id="fornecedor-obs" rows="3" class="form-textarea mt-1 block w-full"></textarea></div>
                                        </div>
                                    </div>
                                    <div id="fornecedor-form-feedback" class="text-sm mt-4"></div>
                                    <div class="flex justify-end pt-4 border-t">
                                        <button type="submit" class="inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm">Salvar Fornecedor</button>
                                    </div>
                                </form>
                                <div class="mt-8 border-t pt-6">
                                    <h3 class="text-lg font-medium text-gray-900 mb-4">Fornecedores Cadastrados</h3>
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome / Razão Social</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">CNPJ / CPF</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contato Principal</th>
                                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="fornecedores-table-body" class="bg-white divide-y divide-gray-200"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <!-- Tab: Clientes -->
                            <div id="clientes-tab-comercial" class="tab-content-comercial hidden">
                                <form id="cliente-form" class="space-y-6">
                                    <input type="hidden" id="cliente-id">
                                    <!-- Abas do Formulário de Cliente -->
                                    <div class="border-b border-gray-200">
                                        <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                                            <a href="#" class="cliente-tab-link active border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-cliente-tab="cliente-dados-principais">Dados Principais</a>
                                            <a href="#" class="cliente-tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-cliente-tab="cliente-contato">Contato</a>
                                            <a href="#" class="cliente-tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-cliente-tab="cliente-enderecos">Endereços</a>
                                            <a href="#" class="cliente-tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-cliente-tab="cliente-financeiro">Comercial/Financeiro</a>
                                        </nav>
                                    </div>

                                    <!-- Conteúdo das Abas do Cliente -->
                                    <div class="pt-4">
                                        <!-- Tab: Dados Principais -->
                                        <div id="cliente-dados-principais-tab" class="cliente-tab-content space-y-4">
                                            <div>
                                                <label for="cliente-tipo-pessoa" class="block text-sm font-medium text-gray-700">Tipo de Pessoa</label>
                                                <select id="cliente-tipo-pessoa" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                    <option value="fisica">Pessoa Física</option>
                                                    <option value="juridica">Pessoa Jurídica</option>
                                                </select>
                                            </div>

                                            <!-- Campos Pessoa Física -->
                                            <div id="cliente-pessoa-fisica-fields" class="space-y-4">
                                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                    <div>
                                                        <label for="cliente-nome-completo" class="block text-sm font-medium text-gray-700">Nome Completo</label>
                                                        <input type="text" id="cliente-nome-completo" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                    </div>
                                                    <div>
                                                        <label for="cliente-cpf" class="block text-sm font-medium text-gray-700">CPF</label>
                                                        <input type="text" id="cliente-cpf" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                    </div>
                                                </div>
                                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                    <div>
                                                        <label for="cliente-rg" class="block text-sm font-medium text-gray-700">RG</label>
                                                        <input type="text" id="cliente-rg" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                    </div>
                                                    <div>
                                                        <label for="cliente-data-nascimento" class="block text-sm font-medium text-gray-700">Data de Nascimento</label>
                                                        <input type="date" id="cliente-data-nascimento" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Campos Pessoa Jurídica -->
                                            <div id="cliente-pessoa-juridica-fields" class="hidden space-y-4">
                                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                    <div>
                                                        <label for="cliente-razao-social" class="block text-sm font-medium text-gray-700">Razão Social</label>
                                                        <input type="text" id="cliente-razao-social" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                    </div>
                                                    <div>
                                                        <label for="cliente-nome-fantasia" class="block text-sm font-medium text-gray-700">Nome Fantasia</label>
                                                        <input type="text" id="cliente-nome-fantasia" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                    </div>
                                                </div>
                                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                    <div>
                                                        <label for="cliente-cnpj" class="block text-sm font-medium text-gray-700">CNPJ</label>
                                                        <input type="text" id="cliente-cnpj" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                    </div>
                                                    <div>
                                                        <label for="cliente-inscricao" class="block text-sm font-medium text-gray-700">Inscrição Estadual / Municipal</label>
                                                        <input type="text" id="cliente-inscricao" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Tab: Contato -->
                                        <div id="cliente-contato-tab" class="cliente-tab-content hidden space-y-4">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div>
                                                    <label for="cliente-telefone" class="block text-sm font-medium text-gray-700">Telefone Principal</label>
                                                    <input type="tel" id="cliente-telefone" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                </div>
                                                <div>
                                                    <label for="cliente-email" class="block text-sm font-medium text-gray-700">E-mail Principal</label>
                                                    <input type="email" id="cliente-email" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                </div>
                                            </div>
                                             <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div>
                                                    <label for="cliente-website" class="block text-sm font-medium text-gray-700">Website/Rede Social</label>
                                                    <input type="url" id="cliente-website" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                </div>
                                                 <div>
                                                    <label for="cliente-contato-pessoa" class="block text-sm font-medium text-gray-700">Pessoa de Contato</label>
                                                    <input type="text" id="cliente-contato-pessoa" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                </div>
                                            </div>
                                            <div>
                                                <label for="cliente-email-financeiro" class="block text-sm font-medium text-gray-700">E-mail do Financeiro</label>
                                                <input type="email" id="cliente-email-financeiro" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                            </div>
                                        </div>

                                        <!-- Tab: Endereços -->
                                        <div id="cliente-enderecos-tab" class="cliente-tab-content hidden space-y-4">
                                            <h4 class="text-md font-semibold text-gray-700">Endereço Principal</h4>
                                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                                <div>
                                                    <label for="cliente-cep" class="block text-sm font-medium text-gray-700">CEP</label>
                                                    <input type="text" id="cliente-cep" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                </div>
                                                <div class="col-span-2">
                                                    <label for="cliente-logradouro" class="block text-sm font-medium text-gray-700">Logradouro</label>
                                                    <input type="text" id="cliente-logradouro" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                </div>
                                            </div>
                                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                                <div>
                                                    <label for="cliente-numero" class="block text-sm font-medium text-gray-700">Número</label>
                                                    <input type="text" id="cliente-numero" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                </div>
                                                <div>
                                                    <label for="cliente-complemento" class="block text-sm font-medium text-gray-700">Complemento</label>
                                                    <input type="text" id="cliente-complemento" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                </div>
                                                <div>
                                                    <label for="cliente-bairro" class="block text-sm font-medium text-gray-700">Bairro</label>
                                                    <input type="text" id="cliente-bairro" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                </div>
                                            </div>
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div>
                                                    <label for="cliente-cidade" class="block text-sm font-medium text-gray-700">Cidade</label>
                                                    <input type="text" id="cliente-cidade" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                </div>
                                                <div>
                                                    <label for="cliente-estado" class="block text-sm font-medium text-gray-700">Estado (UF)</label>
                                                    <input type="text" id="cliente-estado" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                </div>
                                            </div>
                                            <!-- Adicionar lógica para múltiplos endereços se necessário -->
                                        </div>

                                        <!-- Tab: Comercial/Financeiro -->
                                        <div id="cliente-financeiro-tab" class="cliente-tab-content hidden space-y-4">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div>
                                                    <label for="cliente-vendedor" class="block text-sm font-medium text-gray-700">Vendedor Responsável</label>
                                                    <select id="cliente-vendedor" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm"></select>
                                                </div>
                                                <div>
                                                    <label for="cliente-limite-credito" class="block text-sm font-medium text-gray-700">Limite de Crédito</label>
                                                    <input type="number" id="cliente-limite-credito" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" placeholder="0,00">
                                                </div>
                                            </div>
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div>
                                                    <label for="cliente-condicao-pagamento" class="block text-sm font-medium text-gray-700">Condição de Pagamento Padrão</label>
                                                    <select id="cliente-condicao-pagamento" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                        <option>À vista</option>
                                                        <option>30 dias</option>
                                                        <option>15/30/45 dias</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label for="cliente-tabela-precos" class="block text-sm font-medium text-gray-700">Tabela de Preços Padrão</label>
                                                    <select id="cliente-tabela-precos" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                        <option>Varejo</option>
                                                        <option>Atacado</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div>
                                                <label for="cliente-obs" class="block text-sm font-medium text-gray-700">Observações</label>
                                                <textarea id="cliente-obs" rows="3" class="form-textarea mt-1 block w-full rounded-md border-gray-300 shadow-sm"></textarea>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="cliente-form-feedback" class="text-sm mt-4"></div>
                                    <div class="flex justify-end pt-4 border-t">
                                        <button type="submit" class="inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm">Salvar Cliente</button>
                                    </div>
                                </form>
                                <div class="mt-8 border-t pt-6">
                                    <h3 class="text-lg font-medium text-gray-900 mb-4">Clientes Cadastrados</h3>
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome / Razão Social</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">CPF / CNPJ</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contato</th>
                                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="clientes-table-body" class="bg-white divide-y divide-gray-200"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                             <!-- Tab: Serviços -->
                            <div id="servicos-tab-comercial" class="tab-content-comercial hidden">
                                <form id="servico-form">
                                    <input type="hidden" id="servico-id">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700" for="servico-nome">Nome do Serviço</label>
                                            <input type="text" id="servico-nome" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required>
                                        </div>
                                    </div>
                                    <div id="servico-form-feedback" class="text-sm mt-4"></div>
                                    <div class="flex justify-end pt-4">
                                        <button type="submit" class="inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm">Salvar Serviço</button>
                                    </div>
                                </form>
                                <div class="mt-8 border-t pt-6">
                                    <h3 class="text-lg font-medium text-gray-900 mb-4">Serviços Cadastrados</h3>
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome do Serviço</th>
                                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="servicos-table-body" class="bg-white divide-y divide-gray-200"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                      </div>
                    </div>

                    <!-- Seção de Cadastro Financeiros e Contábeis (inicia oculta) -->
                    <div id="financeiros-cadastro-section" class="hidden mt-8">
                      <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm w-full">
                        <div class="flex justify-between items-center mb-4 border-b border-gray-200 pb-4">
                            <h2 class="text-gray-900 text-2xl font-bold leading-tight tracking-tight">Financeiros e Contábeis</h2>
                            <button id="close-financeiros-cadastro" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                                <span class="material-symbols-outlined text-gray-600">close</span>
                            </button>
                        </div>

                        <!-- Abas/Tabs para navegação -->
                        <div class="border-b border-gray-200">
                            <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                                <a href="#" class="tab-link-financeiro active" data-tab-financeiro="planos-de-contas">Planos de Contas</a>
                                <a href="#" class="tab-link-financeiro" data-tab-financeiro="contas-bancarias">Contas Bancárias</a>
                            </nav>
                        </div>

                        <!-- Conteúdo das Abas -->
                        <div class="mt-6">
                            <!-- Tab: Planos de Contas -->
                            <div id="planos-de-contas-tab-financeiro" class="tab-content-financeiro">
                                <form id="plano-conta-form">
                                    <input type="hidden" id="plano-conta-id">
                                    <input type="hidden" id="plano-conta-nivel">
                                    <input type="hidden" id="plano-conta-codigo-pai">
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700" for="plano-conta-codigo">Código</label>
                                            <input type="text" id="plano-conta-codigo" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm bg-gray-100" readonly placeholder="Gerado ao adicionar sub-conta">
                                        </div>
                                        <div class="md:col-span-2">
                                            <label class="block text-sm font-medium text-gray-700" for="plano-conta-nome">Nome da Conta</label>
                                            <input type="text" id="plano-conta-nome" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required placeholder="Ex: Despesas Administrativas">
                                        </div>
                                    </div>
                                    <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-6">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700">Tipo de Conta</label>
                                            <div class="mt-2 flex items-center space-x-6">
                                                <div class="flex items-center">
                                                    <input id="plano-conta-tipo-sintetica" name="plano-conta-tipo-lancamento" type="radio" value="false" class="h-4 w-4 text-indigo-600 border-gray-300" checked>
                                                    <label for="plano-conta-tipo-sintetica" class="ml-2 block text-sm font-medium text-gray-700">Sintética (Agrupadora)</label>
                                                </div>
                                                <div class="flex items-center">
                                                    <input id="plano-conta-tipo-analitica" name="plano-conta-tipo-lancamento" type="radio" value="true" class="h-4 w-4 text-indigo-600 border-gray-300">
                                                    <label for="plano-conta-tipo-analitica" class="ml-2 block text-sm font-medium text-gray-700">Analítica (De Lançamento)</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <label for="plano-conta-tipo" class="block text-sm font-medium text-gray-700">Grupo Principal</label>
                                            <select id="plano-conta-tipo" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                <option value="receita">Receita</option>
                                                <option value="despesa">Despesa</option>
                                                <option value="custo">Custo</option>
                                                <option value="investimento">Investimento/Movimentação</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label for="plano-conta-atividade" class="block text-sm font-medium text-gray-700">Tipo de Atividade (DRE)</label>
                                            <select id="plano-conta-atividade" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                                <option value="Operacional">Operacional</option>
                                                <option value="Investimento">Investimento</option>
                                                <option value="Financiamento">Financiamento</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div id="plano-conta-analitica-fields" class="hidden mt-4 p-4 border rounded-md bg-gray-50">
                                        <label class="block text-sm font-medium text-gray-700">Onde esta conta pode ser usada?</label>
                                        <div class="mt-2 space-y-2">
                                            <div class="flex items-center">
                                                <input id="plano-conta-aplicavel-pagamentos" name="aplicavelEm" type="checkbox" value="pagamentos" class="h-4 w-4 text-indigo-600 border-gray-300 rounded">
                                                <label for="plano-conta-aplicavel-pagamentos" class="ml-3 block text-sm font-medium text-gray-700">Contas a Pagar</label>
                                            </div>
                                            <div class="flex items-center">
                                                <input id="plano-conta-aplicavel-recebimentos" name="aplicavelEm" type="checkbox" value="recebimentos" class="h-4 w-4 text-indigo-600 border-gray-300 rounded">
                                                <label for="plano-conta-aplicavel-recebimentos" class="ml-3 block text-sm font-medium text-gray-700">Contas a Receber</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="plano-conta-form-feedback" class="text-sm mt-4"></div>
                                    <div class="flex justify-between items-center pt-4 mt-4 border-t">
                                        <button type="button" id="cancel-plano-conta-form" class="bg-gray-200 text-gray-800 hover:bg-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Cancelar</button>
                                        <button type="submit" class="inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm">Salvar Conta</button>
                                    </div>
                                </form>
                                <div class="mt-8 border-t pt-6">
                                    <div class="flex justify-between items-center mb-4">
                                        <h3 class="text-lg font-medium text-gray-900">Estrutura do Plano de Contas</h3>
                                        <button type="button" id="add-new-account-btn" class="inline-flex items-center justify-center rounded-md bg-blue-100 px-3 py-1 text-sm font-medium text-blue-700 shadow-sm transition-colors hover:bg-blue-200">
                                            <span class="material-symbols-outlined text-base mr-1">add</span>
                                            Nova Conta
                                        </button>
                                    </div>
                                    <div id="plano-contas-tree" class="border rounded-md p-4 bg-gray-50 min-h-[200px]">
                                        <!-- A árvore de contas será renderizada aqui pelo JavaScript -->
                                    </div>
                                </div>
                            </div>
                            <!-- Tab: Contas Bancárias -->
                            <div id="contas-bancarias-tab-financeiro" class="tab-content-financeiro hidden">
                                <form id="conta-bancaria-form">
                                    <input type="hidden" id="conta-bancaria-id">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700" for="conta-bancaria-nome">Nome da Conta</label>
                                            <input type="text" id="conta-bancaria-nome" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required placeholder="Ex: Banco Itaú C/C 1234-5">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700" for="conta-bancaria-saldo-inicial">Saldo Inicial (R$)</label>
                                            <input type="text" id="conta-bancaria-saldo-inicial" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" placeholder="1.000,00">
                                        </div>
                                    </div>
                                    <div id="conta-bancaria-form-feedback" class="text-sm mt-4"></div>
                                    <div class="flex justify-end pt-4">
                                        <button type="submit" class="inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm">Salvar Conta</button>
                                    </div>
                                </form>
                                <div class="mt-8 border-t pt-6">
                                    <h3 class="text-lg font-medium text-gray-900 mb-4">Contas Cadastradas</h3>
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome da Conta</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Saldo Inicial</th>
                                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="contas-bancarias-table-body" class="bg-white divide-y divide-gray-200"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                      </div>
                    </div>

                    <!-- Seção de Cadastro Recursos Humanos (inicia oculta) -->
                    <div id="rh-cadastro-section" class="hidden mt-8">
                      <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm w-full">
                        <div class="flex justify-between items-center mb-4 border-b border-gray-200 pb-4">
                            <h2 class="text-gray-900 text-2xl font-bold leading-tight tracking-tight">Recursos Humanos</h2>
                            <button id="close-rh-cadastro" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                                <span class="material-symbols-outlined text-gray-600">close</span>
                            </button>
                        </div>
                        <!-- Formulário de Funcionário -->
                        <form id="funcionario-form" class="space-y-6">
                            <input type="hidden" id="funcionario-id">
                            <!-- Abas do Formulário de Funcionário -->
                            <div class="border-b border-gray-200">
                                <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                                    <a href="#" class="funcionario-tab-link active border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-funcionario-tab="pessoal">Dados Pessoais</a>
                                    <a href="#" class="funcionario-tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-funcionario-tab="contato">Contato e Endereço</a>
                                    <a href="#" class="funcionario-tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-funcionario-tab="contratual">Dados Contratuais</a>
                                    <a href="#" class="funcionario-tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-funcionario-tab="bancario">Dados Bancários</a>
                                    <a href="#" class="funcionario-tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-funcionario-tab="acesso">Acesso ao Sistema</a>
                                </nav>
                            </div>

                            <div class="pt-4">
                                <!-- Tab: Dados Pessoais -->
                                <div id="pessoal-tab" class="funcionario-tab-content space-y-4">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div><label for="funcionario-nome-completo" class="block text-sm font-medium text-gray-700">Nome Completo</label><input type="text" id="funcionario-nome-completo" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-nome-social" class="block text-sm font-medium text-gray-700">Nome Social</label><input type="text" id="funcionario-nome-social" class="form-input mt-1 block w-full"></div>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div><label for="funcionario-data-nascimento" class="block text-sm font-medium text-gray-700">Data de Nascimento</label><input type="date" id="funcionario-data-nascimento" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-cpf-rh" class="block text-sm font-medium text-gray-700">CPF</label><input type="text" id="funcionario-cpf-rh" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-rg-rh" class="block text-sm font-medium text-gray-700">RG</label><input type="text" id="funcionario-rg-rh" class="form-input mt-1 block w-full"></div>
                                    </div>
                                     <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div><label for="funcionario-pis" class="block text-sm font-medium text-gray-700">PIS/PASEP</label><input type="text" id="funcionario-pis" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-estado-civil" class="block text-sm font-medium text-gray-700">Estado Civil</label><input type="text" id="funcionario-estado-civil" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-nacionalidade" class="block text-sm font-medium text-gray-700">Nacionalidade</label><input type="text" id="funcionario-nacionalidade" class="form-input mt-1 block w-full"></div>
                                    </div>
                                     <div class="pt-4 border-t mt-4">
                                        <label for="funcionario-empresa" class="block text-sm font-medium text-gray-700">Empresa <span class="text-red-500">*</span></label>
                                        <select id="funcionario-empresa" class="form-select mt-1 block w-full">
                                            <option value="" disabled selected>Selecione a empresa</option>
                                            <!-- Options populated by JS -->
                                        </select>
                                    </div>
                                </div>
                                <!-- Tab: Contato e Endereço -->
                                <div id="contato-tab" class="funcionario-tab-content hidden space-y-4">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div><label for="funcionario-telefone" class="block text-sm font-medium text-gray-700">Telefone Pessoal</label><input type="tel" id="funcionario-telefone" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-email-pessoal" class="block text-sm font-medium text-gray-700">E-mail Pessoal</label><input type="email" id="funcionario-email-pessoal" class="form-input mt-1 block w-full"></div>
                                    </div>
                                    <div><label for="funcionario-contato-emergencia" class="block text-sm font-medium text-gray-700">Contato de Emergência (Nome e Telefone)</label><input type="text" id="funcionario-contato-emergencia" class="form-input mt-1 block w-full"></div>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t">
                                        <div><label for="funcionario-cep" class="block text-sm font-medium text-gray-700">CEP</label><input type="text" id="funcionario-cep" class="form-input mt-1 block w-full"></div>
                                        <div class="col-span-2"><label for="funcionario-logradouro" class="block text-sm font-medium text-gray-700">Logradouro</label><input type="text" id="funcionario-logradouro" class="form-input mt-1 block w-full"></div>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div><label for="funcionario-numero" class="block text-sm font-medium text-gray-700">Número</label><input type="text" id="funcionario-numero" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-complemento" class="block text-sm font-medium text-gray-700">Complemento</label><input type="text" id="funcionario-complemento" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-bairro" class="block text-sm font-medium text-gray-700">Bairro</label><input type="text" id="funcionario-bairro" class="form-input mt-1 block w-full"></div>
                                    </div>
                                     <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div><label for="funcionario-cidade" class="block text-sm font-medium text-gray-700">Cidade</label><input type="text" id="funcionario-cidade" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-estado" class="block text-sm font-medium text-gray-700">Estado (UF)</label><input type="text" id="funcionario-estado" class="form-input mt-1 block w-full"></div>
                                    </div>
                                </div>
                                <!-- Tab: Dados Contratuais -->
                                <div id="contratual-tab" class="funcionario-tab-content hidden space-y-4">
                                     <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div><label for="funcionario-matricula" class="block text-sm font-medium text-gray-700">Matrícula</label><input type="text" id="funcionario-matricula" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-admissao" class="block text-sm font-medium text-gray-700">Data de Admissão</label><input type="date" id="funcionario-admissao" class="form-input mt-1 block w-full"></div>
                                         <div><label for="funcionario-desligamento" class="block text-sm font-medium text-gray-700">Data de Desligamento</label><input type="date" id="funcionario-desligamento" class="form-input mt-1 block w-full"></div>
                                    </div>
                                     <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div><label for="funcionario-cargo" class="block text-sm font-medium text-gray-700">Cargo</label><input type="text" id="funcionario-cargo" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-departamento" class="block text-sm font-medium text-gray-700">Departamento</label><input type="text" id="funcionario-departamento" class="form-input mt-1 block w-full"></div>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div><label for="funcionario-salario" class="block text-sm font-medium text-gray-700">Salário Base</label><input type="number" id="funcionario-salario" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-tipo-contrato" class="block text-sm font-medium text-gray-700">Tipo de Contrato</label><input type="text" id="funcionario-tipo-contrato" class="form-input mt-1 block w-full" placeholder="CLT, Estágio, PJ..."></div>
                                        <div><label for="funcionario-jornada" class="block text-sm font-medium text-gray-700">Jornada de Trabalho</label><input type="text" id="funcionario-jornada" class="form-input mt-1 block w-full" placeholder="Ex: 44 horas semanais"></div>
                                    </div>
                                </div>
                                <!-- Tab: Dados Bancários -->
                                <div id="bancario-tab" class="funcionario-tab-content hidden space-y-4">
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div><label for="funcionario-banco" class="block text-sm font-medium text-gray-700">Banco</label><input type="text" id="funcionario-banco" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-agencia" class="block text-sm font-medium text-gray-700">Agência</label><input type="text" id="funcionario-agencia" class="form-input mt-1 block w-full"></div>
                                        <div><label for="funcionario-conta" class="block text-sm font-medium text-gray-700">Conta Corrente</label><input type="text" id="funcionario-conta" class="form-input mt-1 block w-full"></div>
                                    </div>
                                </div>
                                <!-- Tab: Acesso ao Sistema -->
                                <div id="acesso-tab" class="funcionario-tab-content hidden space-y-4">
                                    <div><label for="funcionario-usuario-sistema" class="block text-sm font-medium text-gray-700">Usuário do Sistema</label><select id="funcionario-usuario-sistema" class="form-select mt-1 block w-full"></select></div>
                                </div>
                            </div>

                            <div id="funcionario-form-feedback" class="text-sm mt-4"></div>
                            <div class="flex justify-end pt-4 border-t">
                                <button type="submit" class="inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm">Salvar Funcionário</button>
                            </div>
                        </form>
                        <!-- Tabela de Funcionários -->
                         <div class="mt-8 border-t pt-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Funcionários Cadastrados</h3>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Matrícula</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cargo</th>
                                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody id="funcionarios-table-body" class="bg-white divide-y divide-gray-200"></tbody>
                                </table>
                            </div>
                        </div>
                      </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
  </div>

  <!-- Container da Tela Financeiro - Contas a Pagar -->
  <div id="contas-a-pagar-page" class="view-container min-h-screen w-full">
    <div class="relative flex size-full min-h-screen flex-col group/design-root w-full">
        <div class="layout-container flex h-full grow flex-col w-full">
            <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-gray-200 bg-white px-10 py-3">
                <a href="#" class="flex items-center gap-4 text-gray-800 nav-link" data-target="main-page">
                    <div class="size-8 text-[var(--primary-color)]">
                        <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M4 8L24 4L44 8L24 12L4 8Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path><path d="M4 24L24 20L44 24L24 28L4 24Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path><path d="M4 40L24 36L44 40L24 44L4 40Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path></svg>
                    </div>
                    <h2 class="text-gray-800 text-lg font-semibold leading-tight tracking-[-0.015em]">ArchSys</h2>
                </a>
                <nav class="flex items-center gap-8">
                    <a class="nav-link text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#" data-target="main-page">Painel</a>
                    <a class="nav-link text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#" data-target="cadastros-page">Cadastros</a>
                    <a class="text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#">Compras</a>
                    <div class="relative">
                        <button id="financeiro-nav-link-contas" class="text-[var(--primary-color)] text-sm font-medium leading-normal flex items-center gap-1">
                            <span>Financeiro</span>
                            <span class="material-symbols-outlined text-base">expand_more</span>
                        </button>
                        <div id="financeiro-dropdown-contas" class="hidden absolute mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20">
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="contas-a-pagar-page">Contas a Pagar</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="contas-a-receber-page">Contas a Receber</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="fluxo-de-caixa-page">Fluxo de Caixa</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="movimentacao-bancaria-page">Conciliação Bancária</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="relatorios-page">Relatórios</a>
                        </div>
                    </div>
                    <a class="text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#">Vendas</a>
                </nav>
                 <div class="flex items-center gap-4">
                    <button id="notification-bell-contas" class="relative rounded-full p-2 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]">
                        <span class="material-symbols-outlined text-gray-600">notifications</span>
                        <span id="notification-indicator-contas" class="hidden absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"></span>
                    </button>
                    <div class="relative">
                        <button id="profile-button-contas" class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" style='background-image: url("https://placehold.co/40x40/E2E8F0/4A5568?text=U");'></button>
                        <div id="profile-dropdown-contas" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10">
                            <div class="px-4 py-2 text-sm text-gray-700 border-b">
                                <p class="font-medium">Logado como:</p>
                                <p id="user-email-contas" class="truncate"></p>
                            </div>
                            <a href="#" id="logout-button-contas" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sair</a>
                        </div>
                    </div>
                </div>
            </header>
            <main class="flex-1 px-10 py-8 bg-gray-50">
                <div class="layout-content-container mx-auto flex max-w-7xl flex-col gap-8">
                    <div class="flex flex-col gap-2">
                        <h1 class="text-gray-900 text-3xl font-bold leading-tight tracking-tight">Módulo Financeiro</h1>
                        <p class="text-gray-600 text-base font-normal leading-normal">Gerencie suas contas a pagar, a receber e acompanhe o fluxo de caixa.</p>
                    </div>

                    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4">
                        <div id="total-a-pagar-card-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm cursor-pointer hover:bg-gray-100 transition-colors">
                            <p class="text-gray-800 text-base font-medium leading-normal">Total a Pagar no Mês</p>
                            <p id="total-a-pagar-card" class="text-gray-900 text-3xl font-bold leading-tight">R$ 0,00</p>
                        </div>
                        <div id="total-pago-card-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm cursor-pointer hover:bg-gray-100 transition-colors">
                           <p class="text-gray-800 text-base font-medium leading-normal">Total Pago no Mês</p>
                            <p id="total-pago-card" class="text-gray-900 text-3xl font-bold leading-tight">R$ 0,00</p>
                        </div>
                        <div id="contas-vencidas-card-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm cursor-pointer hover:bg-gray-100 transition-colors">
                            <p class="text-gray-800 text-base font-medium leading-normal">Contas Vencidas</p>
                            <p id="contas-vencidas-card" class="text-red-600 text-3xl font-bold leading-tight">R$ 0,00</p>
                        </div>
                        <div id="saldo-em-conta-pagar-card-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                            <p class="text-gray-800 text-base font-medium leading-normal">Saldo em Conta</p>
                            <p id="saldo-em-conta-pagar-card" class="saldo-em-conta-value text-blue-600 text-3xl font-bold leading-tight">R$ 0,00</p>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm w-full">
                        <!-- Cabeçalho com Título e Botões de Visualização -->
                        <div class="flex justify-between items-center mb-4 pb-4 border-b">
                            <h2 class="text-gray-900 text-xl font-semibold">Contas a Pagar</h2>
                            <div class="flex items-center gap-2" id="view-toggle-buttons">
                                <button id="lista-view-btn" class="flex items-center gap-2 px-3 py-1 text-sm font-medium rounded-md bg-blue-100 text-blue-700">
                                    <span class="material-symbols-outlined text-base">list</span>
                                    <span>Lista</span>
                                </button>
                                <button id="calendario-view-btn" class="flex items-center gap-2 px-3 py-1 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-100">
                                    <span class="material-symbols-outlined text-base">calendar_month</span>
                                    <span>Calendário</span>
                                </button>
                            </div>
                        </div>

                        <!-- Barra de Ferramentas com Botões de Ação -->
                        <div class="flex items-center gap-2 mb-4">
                             <button id="lancar-despesa-btn" class="inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]">
                                Novo
                            </button>
                            <button id="pagar-selecionadas-btn" class="inline-flex items-center gap-2 justify-center rounded-md bg-green-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                <span class="material-symbols-outlined text-base">payments</span> Pagar
                            </button>
                            <button id="visualizar-selecionada-btn" class="inline-flex items-center gap-2 justify-center rounded-md bg-gray-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                <span class="material-symbols-outlined text-base">visibility</span> Visualizar
                            </button>
                            <button id="editar-selecionada-btn" class="inline-flex items-center gap-2 justify-center rounded-md bg-blue-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                <span class="material-symbols-outlined text-base">edit</span> Editar
                            </button>
                            <button id="excluir-selecionadas-btn" class="inline-flex items-center gap-2 justify-center rounded-md bg-red-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                <span class="material-symbols-outlined text-base">delete</span> Excluir
                            </button>
                        </div>

                        <!-- Toolbar de Filtros e Busca -->
                        <div id="filter-toolbar" class="flex flex-wrap items-end gap-4 mb-6 p-4 bg-gray-50 rounded-lg border">
                            <div class="flex-grow min-w-[200px]">
                                <label for="search-input" class="block text-sm font-medium text-gray-700">Buscar</label>
                                <input type="text" id="search-input" placeholder="Buscar por descrição, fornecedor..." class="form-input mt-1 block w-full">
                            </div>
                            <div>
                                <label for="start-date-input" class="block text-sm font-medium text-gray-700">Vencimento de</label>
                                <input type="date" id="start-date-input" class="form-input mt-1 block w-full">
                            </div>
                            <div>
                                <label for="end-date-input" class="block text-sm font-medium text-gray-700">até</label>
                                <input type="date" id="end-date-input" class="form-input mt-1 block w-full">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Status</label>
                                <div id="status-filter-group" class="flex items-center gap-2 mt-1">
                                    <button data-status="Pendente" class="status-filter-btn px-3 py-1 text-sm font-medium rounded-md">Pendente</button>
                                    <button data-status="Vencido" class="status-filter-btn px-3 py-1 text-sm font-medium rounded-md">Vencido</button>
                                    <button data-status="Pago Parcialmente" class="status-filter-btn px-3 py-1 text-sm font-medium rounded-md">Parcial</button>
                                    <button data-status="Pago" class="status-filter-btn px-3 py-1 text-sm font-medium rounded-md">Pago</button>
                                </div>
                            </div>
                        </div>

                        <!-- Container da Visualização de Lista -->
                        <div id="lista-view">
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="p-4"><input id="select-all-checkbox" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"></th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Número</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Descrição</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Favorecido</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Forma de Pagamento</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vencimento</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor Original</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Descontos</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Juros</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor Pago</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Saldo Devedor</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody id="despesas-table-body" class="bg-white divide-y divide-gray-200">
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Container da Visualização de Calendário (inicia oculto) -->
                        <div id="calendario-view" class="hidden">
                            <div id="calendar" class="w-full"></div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
  </div>

  <!-- Modal de Lançamento de Despesa -->
  <div id="despesa-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
      <div class="relative top-20 mx-auto p-5 border w-full max-w-3xl shadow-lg rounded-md bg-white">
          <div class="flex justify-between items-center border-b pb-3">
              <h3 class="text-2xl font-bold text-gray-900">Lançar Nova Despesa</h3>
              <button id="close-modal-btn" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                  <span class="material-symbols-outlined text-gray-600">close</span>
              </button>
          </div>
          <div class="mt-5">
              <form id="despesa-form" class="space-y-6">
                  <input type="hidden" id="despesa-id">
                  <!-- Seção 1: Informações Essenciais -->
                  <div class="p-4 border rounded-md">
                      <h4 class="text-lg font-semibold text-gray-800 mb-4">Informações Essenciais</h4>
                      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 col-span-2">
                            <div class="md:col-span-2">
                                <label for="despesa-descricao" class="block text-sm font-medium text-gray-700">Descrição</label>
                                <input type="text" id="despesa-descricao" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required placeholder="Ex: Manutenção do ar condicionado">
                            </div>
                            <div>
                                <label for="despesa-numero-documento" class="block text-sm font-medium text-gray-700">Número do Documento</label>
                                <input type="text" id="despesa-numero-documento" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm bg-gray-100" placeholder="Gerado automaticamente" readonly>
                            </div>
                          </div>
                          <div>
                              <label for="favorecido-tipo" class="block text-sm font-medium text-gray-700">Tipo de Favorecido</label>
                              <select id="favorecido-tipo" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm" required>
                                  <option value="">Selecione o Tipo</option>
                                  <option value="fornecedores">Fornecedor</option>
                                  <option value="funcionarios">Funcionário</option>
                                  <option value="servicos">Serviço</option>
                                  <option value="clientes">Cliente</option>
                              </select>
                          </div>
                          <div>
                              <label for="favorecido-nome" class="block text-sm font-medium text-gray-700">Nome do Favorecido</label>
                              <select id="favorecido-nome" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm" required>
                                  <option value="">Selecione um favorecido</option>
                                  <!-- Opções preenchidas dinamicamente -->
                              </select>
                          </div>
                          <div>
                              <label for="despesa-categoria" class="block text-sm font-medium text-gray-700">Plano de Contas / Categoria</label>
                              <select id="despesa-categoria" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[var(--primary-color)] focus:ring-[var(--primary-color)]" required>
                                  <option value="">Selecione uma categoria</option>
                                  <!-- Opções via JS -->
                              </select>
                          </div>
                      </div>
                  </div>

                  <!-- Seção 2: Valores, Prazos e Condições de Pagamento -->
                  <div class="p-4 border rounded-md">
                      <h4 class="text-lg font-semibold text-gray-800 mb-4">Valores, Prazos e Condições</h4>
                      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div>
                              <label for="despesa-valor" class="block text-sm font-medium text-gray-700">Valor</label>
                              <input type="text" id="despesa-valor" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required placeholder="0,00">
                          </div>
                          <div>
                              <label for="forma-pagamento" class="block text-sm font-medium text-gray-700">Forma de Pagamento</label>
                              <select id="forma-pagamento" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                  <option value="a_vista">À Vista</option>
                                  <option value="boleto">Boleto Bancário</option>
                                  <option value="pix">PIX</option>
                                  <option value="cartao_credito">Cartão de Crédito</option>
                                  <option value="transferencia">Transferência (TED/DOC)</option>
                                  <option value="parcelado">Parcelado</option>
                                  <option value="recorrente">Recorrente</option>
                              </select>
                          </div>
                      </div>
                      <div id="parcelado-fields" class="hidden mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div>
                              <label for="parcelas-numero" class="block text-sm font-medium text-gray-700">Quantidade de Parcelas</label>
                              <input type="number" id="parcelas-numero" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" placeholder="Ex: 12">
                          </div>
                          <div>
                              <label for="parcelas-intervalo" class="block text-sm font-medium text-gray-700">Intervalo</label>
                              <select id="parcelas-intervalo" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                  <option value="mensal">Mensal</option>
                                  <option value="quinzenal">Quinzenal</option>
                                  <option value="semanal">Semanal</option>
                              </select>
                          </div>
                      </div>
                      <div id="recorrente-fields" class="hidden mt-4 space-y-4">
                          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                              <div>
                                  <label for="recorrencia-frequencia" class="block text-sm font-medium text-gray-700">Repetir a cada</label>
                                  <select id="recorrencia-frequencia" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                      <option value="mensal">Mês</option>
                                      <option value="bimestral">Bimestre</option>
                                      <option value="trimestral">Trimestre</option>
                                      <option value="semestral">Semestre</option>
                                      <option value="anual">Ano</option>
                                  </select>
                              </div>
                          </div>
                          <div>
                              <label class="block text-sm font-medium text-gray-700">Fim da Recorrência</label>
                              <div class="mt-2 space-y-2">
                                  <div class="flex items-center">
                                      <input type="radio" id="recorrencia-fim-data-radio" name="recorrencia-fim" value="data" class="h-4 w-4 text-indigo-600 border-gray-300">
                                      <label for="recorrencia-fim-data-radio" class="ml-3 block text-sm font-medium text-gray-700">Em:</label>
                                      <input type="date" id="recorrencia-fim-data" class="form-input ml-2 block w-full rounded-md border-gray-300 shadow-sm">
                                  </div>
                                  <div class="flex items-center">
                                      <input type="radio" id="recorrencia-fim-ocorrencias-radio" name="recorrencia-fim" value="ocorrencias" class="h-4 w-4 text-indigo-600 border-gray-300">
                                      <label for="recorrencia-fim-ocorrencias-radio" class="ml-3 block text-sm font-medium text-gray-700">Após:</label>
                                      <input type="number" id="recorrencia-fim-ocorrencias" class="form-input ml-2 block w-24 rounded-md border-gray-300 shadow-sm">
                                      <span class="ml-2 text-sm text-gray-600">ocorrências</span>
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                          <div>
                              <label for="despesa-emissao" class="block text-sm font-medium text-gray-700">Data de Emissão</label>
                              <input type="date" id="despesa-emissao" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                          </div>
                          <div>
                              <label for="despesa-competencia" class="block text-sm font-medium text-gray-700">Data de Competência</label>
                              <input type="date" id="despesa-competencia" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required>
                          </div>
                          <div>
                              <label for="despesa-vencimento" class="block text-sm font-medium text-gray-700">Data de Vencimento</label>
                              <input type="date" id="despesa-vencimento" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required>
                          </div>
                      </div>
                  </div>

                  <!-- Seção 3: Informações de Pagamento (Condicional) -->
                  <div class="p-4 border rounded-md">
                      <div class="flex items-center">
                          <input id="marcar-pago-checkbox" type="checkbox" class="h-4 w-4 text-[var(--primary-color)] focus:ring-[var(--primary-color)] border-gray-300 rounded">
                          <label for="marcar-pago-checkbox" class="ml-2 block text-sm font-medium text-gray-900">Marcar como pago?</label>
                      </div>
                      <div id="pagamento-info" class="hidden mt-4 space-y-4">
                           <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label for="pagamento-data" class="block text-sm font-medium text-gray-700">Data de Pagamento</label>
                                    <input type="date" id="pagamento-data" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[var(--primary-color)] focus:ring-[var(--primary-color)]">
                                </div>
                                <div>
                                    <label for="pagamento-valor" class="block text-sm font-medium text-gray-700">Valor Pago</label>
                                    <input type="text" id="pagamento-valor" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[var(--primary-color)] focus:ring-[var(--primary-color)]" placeholder="0,00">
                                </div>
                                <div>
                                    <label for="pagamento-conta" class="block text-sm font-medium text-gray-700">Conta de Saída</label>
                                    <select id="pagamento-conta" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[var(--primary-color)] focus:ring-[var(--primary-color)]">
                                        <option value="">Selecione uma conta</option>
                                        <!-- Opções via JS -->
                                    </select>
                                </div>
                           </div>
                      </div>
                  </div>

                  <!-- Seção 4: Complementar -->
                   <div class="p-4 border rounded-md">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Complementar</h4>
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label for="despesa-obs" class="block text-sm font-medium text-gray-700">Observações / Notas</label>
                                <textarea id="despesa-obs" rows="3" class="form-textarea mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[var(--primary-color)] focus:ring-[var(--primary-color)]"></textarea>
                            </div>
                             <div>
                                <label for="despesa-anexo" class="block text-sm font-medium text-gray-700">Anexar Nota Fiscal ou Boleto</label>
                                <input type="file" id="despesa-anexo" class="form-input mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-[var(--primary-color)] hover:file:bg-blue-100">
                            </div>
                        </div>
                   </div>

                  <div class="flex items-center justify-end pt-4 border-t space-x-4">
                      <button type="button" id="cancel-modal-btn" class="bg-gray-200 text-gray-800 hover:bg-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Cancelar</button>
                      <button type="submit" class="text-white bg-[var(--primary-color)] hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Salvar Lançamento</button>
                  </div>
              </form>
          </div>
      </div>
  </div>

  <!-- Modal de Registro de Pagamento -->
  <div id="pagar-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
      <div class="relative top-20 mx-auto p-5 border w-full max-w-xl shadow-lg rounded-md bg-white">
          <div class="flex justify-between items-center border-b pb-3">
              <h3 class="text-2xl font-bold text-gray-900">Registrar Pagamento</h3>
              <button id="close-pagar-modal-btn" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                  <span class="material-symbols-outlined text-gray-600">close</span>
              </button>
          </div>
          <div class="mt-5">
              <form id="pagar-form" class="space-y-6">
                  <input type="hidden" id="pagar-despesa-id">
                  <div class="p-4 border rounded-md space-y-4">
                      <h4 class="text-lg font-semibold text-gray-800 mb-4">Detalhes do Pagamento</h4>
                      <p id="saldo-devedor-display" class="text-lg font-medium text-gray-700">Saldo Devedor: <span class="font-bold text-blue-600">R$ 0,00</span></p>
                      <div>
                          <label for="pagar-data" class="block text-sm font-medium text-gray-700">Data do Pagamento</label>
                          <input type="date" id="pagar-data" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required>
                      </div>
                      <div>
                          <label for="pagar-valor" class="block text-sm font-medium text-gray-700">Valor a Pagar (R$)</label>
                          <input type="text" id="pagar-valor" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required placeholder="0,00">
                      </div>
                      <div>
                          <label for="pagar-descontos" class="block text-sm font-medium text-gray-700">Descontos Concedidos (R$)</label>
                          <input type="text" id="pagar-descontos" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" placeholder="0,00">
                      </div>
                      <div>
                          <label for="pagar-juros-multa" class="block text-sm font-medium text-gray-700">Juros / Multa (R$)</label>
                          <input type="text" id="pagar-juros-multa" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" placeholder="0,00">
                      </div>
                      <div>
                          <label for="pagar-valor-final" class="block text-sm font-medium text-gray-700">Valor Final do Pagamento (R$)</label>
                          <input type="text" id="pagar-valor-final" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm bg-gray-100" readonly>
                      </div>
                      <div>
                          <label for="pagar-conta-saida" class="block text-sm font-medium text-gray-700">Conta de Saída</label>
                          <select id="pagar-conta-saida" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm" required>
                              <option value="">Selecione a conta de saída</option>
                              <!-- Opções via JS -->
                          </select>
                      </div>
                      <div>
                          <label for="pagar-meio-pagamento" class="block text-sm font-medium text-gray-700">Meio de Pagamento</label>
                          <select id="pagar-meio-pagamento" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                              <option>PIX</option>
                              <option>Boleto</option>
                              <option>Transferência (TED/DOC)</option>
                              <option>Cartão de Crédito</option>
                              <option>Débito Automático</option>
                              <option>Dinheiro</option>
                          </select>
                      </div>
                      <div>
                          <label for="pagar-anexo" class="block text-sm font-medium text-gray-700">Anexar Comprovante</label>
                          <input type="file" id="pagar-anexo" class="form-input mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-[var(--primary-color)] hover:file:bg-blue-100">
                      </div>
                  </div>
                  <div class="flex items-center justify-end pt-4 border-t space-x-4">
                      <button type="button" id="cancel-pagar-modal-btn" class="bg-gray-200 text-gray-800 hover:bg-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Cancelar</button>
                      <button type="submit" class="text-white bg-[var(--primary-color)] hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Confirmar Pagamento</button>
                  </div>
              </form>
          </div>
      </div>
  </div>

  <!-- Modal de Visualização de Despesa -->
  <div id="visualizar-despesa-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
      <div class="relative top-10 mx-auto p-5 border w-full max-w-6xl shadow-lg rounded-md bg-white">
          <div class="flex justify-between items-center border-b pb-3">
              <h3 class="text-2xl font-bold text-gray-900">Detalhes da Despesa</h3>
              <button id="close-visualizar-modal-btn" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                  <span class="material-symbols-outlined text-gray-600">close</span>
              </button>
          </div>
          <div class="mt-5 grid grid-cols-1 md:grid-cols-3 gap-6">
              <!-- Coluna 1: Detalhes Principais e Histórico -->
              <div class="md:col-span-2 space-y-4">
                  <!-- Informações Gerais -->
                  <h4 class="text-lg font-semibold text-gray-800 border-b pb-2">Informações Gerais</h4>
                  <div><p class="text-sm text-gray-500">Descrição</p><p id="view-despesa-descricao" class="text-base font-medium text-gray-800"></p></div>
                  <div><p class="text-sm text-gray-500">Favorecido</p><p id="view-despesa-favorecido" class="text-base font-medium text-gray-800"></p></div>
                  <div><p class="text-sm text-gray-500">Categoria (Plano de Contas)</p><p id="view-despesa-categoria" class="text-base font-medium text-gray-800"></p></div>
                  <div><p class="text-sm text-gray-500">Observações</p><p id="view-despesa-obs" class="text-base text-gray-800 break-words"></p></div>
                  <!-- Histórico de Transações -->
                  <h4 class="text-lg font-semibold text-gray-800 border-b pb-2 pt-4">Histórico de Transações</h4>
                  <div class="overflow-x-auto border rounded-lg">
                      <table class="min-w-full divide-y divide-gray-200">
                          <thead class="bg-gray-50">
                              <tr>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Tipo</th>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Data</th>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Valor</th>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Juros</th>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Descontos</th>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Ação</th>
                              </tr>
                          </thead>
                          <tbody id="pagamentos-history-table-body" class="bg-white divide-y divide-gray-200">
                              <!-- Linhas do histórico serão inseridas aqui -->
                          </tbody>
                      </table>
                  </div>

                  <!-- Seção de Parcelamento/Recorrência -->
                  <h4 id="parcelamento-section-title" class="text-lg font-semibold text-gray-800 border-b pb-2 pt-4 hidden"></h4>
                  <div id="parcelamento-table-container" class="hidden overflow-x-auto border rounded-lg">
                      <table class="min-w-full divide-y divide-gray-200">
                          <thead class="bg-gray-50">
                              <tr>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Descrição</th>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Vencimento</th>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Valor</th>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                              </tr>
                          </thead>
                          <tbody id="parcelamento-table-body" class="bg-white divide-y divide-gray-200">
                              <!-- Linhas do parcelamento serão inseridas aqui -->
                          </tbody>
                      </table>
                  </div>
              </div>
              <!-- Coluna 2: Status e Valores -->
              <div class="space-y-4 bg-gray-50 p-4 rounded-lg border">
                  <h4 class="text-lg font-semibold text-gray-800 border-b pb-2">Resumo Financeiro</h4>
                  <div><p class="text-sm text-gray-500">Número do Documento</p><p id="view-despesa-numero-documento" class="text-base font-medium text-gray-800"></p></div>
                  <div>
                      <p class="text-sm text-gray-500">Valor Original</p>
                      <p id="view-despesa-valor-original" class="text-2xl font-bold text-blue-600"></p>
                  </div>
                  <div>
                      <p class="text-sm text-gray-500">Descontos Concedidos</p>
                      <p id="view-despesa-descontos" class="text-2xl font-bold text-yellow-600"></p>
                  </div>
                  <div>
                      <p class="text-sm text-gray-500">Juros Pagos</p>
                      <p id="view-despesa-juros" class="text-2xl font-bold text-orange-600"></p>
                  </div>
                   <div>
                      <p class="text-sm text-gray-500">Total Pago</p>
                      <p id="view-despesa-total-pago" class="text-2xl font-bold text-green-600"></p>
                  </div>
                  <div>
                      <p class="text-sm text-gray-500">Saldo Devedor</p>
                      <p id="view-despesa-saldo-devedor" class="text-2xl font-bold text-red-600"></p>
                  </div>
                   <div>
                      <p class="text-sm text-gray-500">Status</p>
                      <p id="view-despesa-status" class="text-base font-medium px-2 py-1 rounded-full inline-block"></p>
                  </div>
              </div>
          </div>
          <div class="flex items-center justify-end pt-4 mt-4 border-t space-x-4">
              <button type="button" id="ok-visualizar-modal-btn" class="bg-gray-200 text-gray-800 hover:bg-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">OK</button>
          </div>
      </div>
  </div>

  <!-- Modal de Confirmação de Pagamento Parcial -->
  <div id="confirmar-parcial-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
    <div class="relative top-20 mx-auto p-5 border w-full max-w-lg shadow-lg rounded-md bg-white">
        <div class="flex justify-between items-center border-b pb-3">
            <h3 class="text-2xl font-bold text-gray-900">Confirmar Pagamento Parcial</h3>
            <button id="close-confirmar-parcial-btn" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                <span class="material-symbols-outlined text-gray-600">close</span>
            </button>
        </div>
        <div class="mt-5">
            <p id="confirmar-parcial-mensagem" class="text-gray-700 text-base mb-4">O valor informado é menor que o saldo devedor. Deseja registrar um pagamento parcial? O saldo restante continuará em aberto.</p>
            <div class="space-y-4">
                <div>
                    <label for="parcial-nova-data-vencimento" class="block text-sm font-medium text-gray-700">
                        Definir nova data de vencimento para o saldo restante? (Opcional)
                    </label>
                    <input type="date" id="parcial-nova-data-vencimento" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                </div>
            </div>
            <div class="flex items-center justify-end pt-4 mt-4 border-t space-x-4">
                <button type="button" id="cancelar-parcial-btn" class="bg-gray-200 text-gray-800 hover:bg-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Cancelar</button>
                <button type="button" id="confirmar-parcial-btn" class="text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Confirmar e Salvar</button>
            </div>
        </div>
    </div>
  </div>

  <!-- Container da Tela Financeiro - Contas a Receber -->
  <div id="contas-a-receber-page" class="view-container min-h-screen w-full">
    <div class="relative flex size-full min-h-screen flex-col group/design-root w-full">
        <div class="layout-container flex h-full grow flex-col w-full">
            <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-gray-200 bg-white px-10 py-3">
                <a href="#" class="flex items-center gap-4 text-gray-800 nav-link" data-target="main-page">
                    <div class="size-8 text-[var(--primary-color)]">
                        <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M4 8L24 4L44 8L24 12L4 8Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path><path d="M4 24L24 20L44 24L24 28L4 24Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path><path d="M4 40L24 36L44 40L24 44L4 40Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path></svg>
                    </div>
                    <h2 class="text-gray-800 text-lg font-semibold leading-tight tracking-[-0.015em]">ArchSys</h2>
                </a>
                <nav class="flex items-center gap-8">
                    <a class="nav-link text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#" data-target="main-page">Painel</a>
                    <a class="nav-link text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#" data-target="cadastros-page">Cadastros</a>
                    <a class="text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#">Compras</a>
                    <div class="relative">
                        <button id="financeiro-nav-link-receber" class="text-[var(--primary-color)] text-sm font-medium leading-normal flex items-center gap-1">
                            <span>Financeiro</span>
                            <span class="material-symbols-outlined text-base">expand_more</span>
                        </button>
                        <div id="financeiro-dropdown-receber" class="hidden absolute mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20">
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="contas-a-pagar-page">Contas a Pagar</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="contas-a-receber-page">Contas a Receber</a>
                             <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="fluxo-de-caixa-page">Fluxo de Caixa</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="movimentacao-bancaria-page">Conciliação Bancária</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="relatorios-page">Relatórios</a>
                        </div>
                    </div>
                    <a class="text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#">Vendas</a>
                </nav>
                 <div class="flex items-center gap-4">
                    <button id="notification-bell-receber" class="relative rounded-full p-2 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]">
                        <span class="material-symbols-outlined text-gray-600">notifications</span>
                        <span id="notification-indicator-receber" class="hidden absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"></span>
                    </button>
                    <div class="relative">
                        <button id="profile-button-receber" class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" style='background-image: url("https://placehold.co/40x40/E2E8F0/4A5568?text=U");'></button>
                        <div id="profile-dropdown-receber" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10">
                            <div class="px-4 py-2 text-sm text-gray-700 border-b">
                                <p class="font-medium">Logado como:</p>
                                <p id="user-email-receber" class="truncate"></p>
                            </div>
                            <a href="#" id="logout-button-receber" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sair</a>
                        </div>
                    </div>
                </div>
            </header>
            <main class="flex-1 px-10 py-8 bg-gray-50">
                <div class="layout-content-container mx-auto flex max-w-7xl flex-col gap-8">
                    <div class="flex flex-col gap-2">
                        <h1 class="text-gray-900 text-3xl font-bold leading-tight tracking-tight">Módulo Financeiro</h1>
                        <p class="text-gray-600 text-base font-normal leading-normal">Gerencie suas contas a pagar, a receber e acompanhe o fluxo de caixa.</p>
                    </div>

                    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4">
                        <div id="total-a-receber-card-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm cursor-pointer hover:bg-gray-100 transition-colors">
                            <p class="text-gray-800 text-base font-medium leading-normal">Total a Receber no Mês</p>
                            <p id="total-a-receber-card" class="text-gray-900 text-3xl font-bold leading-tight">R$ 0,00</p>
                        </div>
                        <div id="total-recebido-card-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm cursor-pointer hover:bg-gray-100 transition-colors">
                           <p class="text-gray-800 text-base font-medium leading-normal">Total Recebido no Mês</p>
                            <p id="total-recebido-card" class="text-gray-900 text-3xl font-bold leading-tight">R$ 0,00</p>
                        </div>
                        <div id="titulos-vencidos-card-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm cursor-pointer hover:bg-gray-100 transition-colors">
                            <p class="text-gray-800 text-base font-medium leading-normal">Títulos Vencidos</p>
                            <p id="titulos-vencidos-card" class="text-red-600 text-3xl font-bold leading-tight">R$ 0,00</p>
                        </div>
                        <div id="saldo-em-conta-card-container" class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                            <p class="text-gray-800 text-base font-medium leading-normal">Saldo em Conta</p>
                            <p id="saldo-em-conta-card" class="saldo-em-conta-value text-blue-600 text-3xl font-bold leading-tight">R$ 0,00</p>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm w-full">
                        <div class="flex justify-between items-center mb-4 pb-4 border-b">
                            <h2 class="text-gray-900 text-xl font-semibold">Contas a Receber</h2>
                            <div class="flex items-center gap-2" id="view-toggle-buttons-receber">
                                <button id="lista-view-btn-receber" class="flex items-center gap-2 px-3 py-1 text-sm font-medium rounded-md bg-blue-100 text-blue-700">
                                    <span class="material-symbols-outlined text-base">list</span>
                                    <span>Lista</span>
                                </button>
                                <button id="calendario-view-btn-receber" class="flex items-center gap-2 px-3 py-1 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-100">
                                    <span class="material-symbols-outlined text-base">calendar_month</span>
                                    <span>Calendário</span>
                                </button>
                            </div>
                        </div>

                        <div class="flex items-center gap-2 mb-4">
                             <button id="lancar-receita-btn" class="inline-flex items-center justify-center rounded-md bg-[var(--primary-color)] px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]">
                                Novo Lançamento
                            </button>
                            <button id="receber-selecionadas-btn" class="inline-flex items-center gap-2 justify-center rounded-md bg-green-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                <span class="material-symbols-outlined text-base">payments</span> Registrar Recebimento
                            </button>
                             <button id="desdobrar-receita-btn" class="inline-flex items-center gap-2 justify-center rounded-md bg-orange-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                <span class="material-symbols-outlined text-base">call_split</span> Desdobrar
                            </button>
                            <button id="visualizar-receita-selecionada-btn" class="inline-flex items-center gap-2 justify-center rounded-md bg-gray-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                <span class="material-symbols-outlined text-base">visibility</span> Visualizar
                            </button>
                            <button id="editar-receita-selecionada-btn" class="inline-flex items-center gap-2 justify-center rounded-md bg-blue-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                <span class="material-symbols-outlined text-base">edit</span> Editar
                            </button>
                            <button id="excluir-receitas-selecionadas-btn" class="inline-flex items-center gap-2 justify-center rounded-md bg-red-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                <span class="material-symbols-outlined text-base">delete</span> Excluir
                            </button>
                        </div>

                        <div id="filter-toolbar-receber" class="flex flex-wrap items-end gap-4 mb-6 p-4 bg-gray-50 rounded-lg border">
                            <div class="flex-grow min-w-[200px]">
                                <label for="search-input-receber" class="block text-sm font-medium text-gray-700">Buscar</label>
                                <input type="text" id="search-input-receber" placeholder="Buscar por descrição, cliente..." class="form-input mt-1 block w-full">
                            </div>
                            <div>
                                <label for="start-date-input-receber" class="block text-sm font-medium text-gray-700">Vencimento de</label>
                                <input type="date" id="start-date-input-receber" class="form-input mt-1 block w-full">
                            </div>
                            <div>
                                <label for="end-date-input-receber" class="block text-sm font-medium text-gray-700">até</label>
                                <input type="date" id="end-date-input-receber" class="form-input mt-1 block w-full">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Status</label>
                                <div id="status-filter-group-receber" class="flex items-center gap-2 mt-1">
                                    <button data-status="Pendente" class="status-filter-btn px-3 py-1 text-sm font-medium rounded-md">Pendente</button>
                                    <button data-status="Vencido" class="status-filter-btn px-3 py-1 text-sm font-medium rounded-md">Vencido</button>
                                    <button data-status="Recebido Parcialmente" class="status-filter-btn px-3 py-1 text-sm font-medium rounded-md">Parcial</button>
                                    <button data-status="Recebido" class="status-filter-btn px-3 py-1 text-sm font-medium rounded-md">Recebido</button>
                                    <button data-status="Desdobrado" class="status-filter-btn px-3 py-1 text-sm font-medium rounded-md">Desdobrado</button>
                                </div>
                            </div>
                        </div>

                        <div id="lista-view-receber">
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="p-4"><input id="select-all-checkbox-receber" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"></th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Número</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Descrição</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vencimento</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor Original</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Descontos</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Juros</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor Recebido</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Saldo Pendente</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody id="receitas-table-body" class="bg-white divide-y divide-gray-200">
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div id="calendario-view-receber" class="hidden">
                            <div id="calendar-receber" class="w-full"></div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
  </div>

  <!-- Modal de Lançamento de Receita -->
  <div id="receita-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
      <div class="relative top-20 mx-auto p-5 border w-full max-w-3xl shadow-lg rounded-md bg-white">
          <div class="flex justify-between items-center border-b pb-3">
              <h3 class="text-2xl font-bold text-gray-900">Lançar Nova Receita</h3>
              <button id="close-receita-modal-btn" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                  <span class="material-symbols-outlined text-gray-600">close</span>
              </button>
          </div>
          <div class="mt-5">
              <form id="receita-form" class="space-y-6">
                  <input type="hidden" id="receita-id">
                  <div class="p-4 border rounded-md">
                      <h4 class="text-lg font-semibold text-gray-800 mb-4">Informações Essenciais</h4>
                      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 col-span-2">
                            <div class="md:col-span-2">
                                <label for="receita-descricao" class="block text-sm font-medium text-gray-700">Descrição</label>
                                <input type="text" id="receita-descricao" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required placeholder="Ex: Projeto de Arquitetura - Fase 1">
                            </div>
                            <div>
                                <label for="receita-numero-documento" class="block text-sm font-medium text-gray-700">Número do Documento</label>
                                <input type="text" id="receita-numero-documento" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm bg-gray-100" placeholder="Gerado automaticamente" readonly>
                            </div>
                          </div>
                          <div>
                              <label for="receita-cliente" class="block text-sm font-medium text-gray-700">Cliente</label>
                              <select id="receita-cliente" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm" required>
                                  <option value="">Selecione um cliente</option>
                              </select>
                          </div>
                          <div>
                              <label for="receita-categoria" class="block text-sm font-medium text-gray-700">Plano de Contas / Categoria</label>
                              <select id="receita-categoria" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[var(--primary-color)] focus:ring-[var(--primary-color)]" required>
                                  <option value="">Selecione uma categoria</option>
                              </select>
                          </div>
                      </div>
                  </div>

                  <div class="p-4 border rounded-md">
                      <h4 class="text-lg font-semibold text-gray-800 mb-4">Valores, Prazos e Condições</h4>
                      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div>
                              <label for="receita-valor" class="block text-sm font-medium text-gray-700">Valor Original</label>
                              <input type="text" id="receita-valor" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required placeholder="0,00">
                          </div>
                          <div>
                              <label for="receita-forma-pagamento" class="block text-sm font-medium text-gray-700">Forma de Pagamento</label>
                              <select id="receita-forma-pagamento" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                  <option value="a_vista">À Vista / Título Único</option>
                                  <option value="parcelado">Parcelado</option>
                                  <option value="recorrente">Recorrente</option>
                              </select>
                          </div>
                      </div>
                      <div id="receita-parcelado-fields" class="hidden mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div>
                              <label for="receita-parcelas-numero" class="block text-sm font-medium text-gray-700">Quantidade de Parcelas</label>
                              <input type="number" id="receita-parcelas-numero" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" placeholder="Ex: 3">
                          </div>
                          <div>
                              <label for="receita-parcelas-intervalo" class="block text-sm font-medium text-gray-700">Intervalo</label>
                              <select id="receita-parcelas-intervalo" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                  <option value="30">30 dias</option>
                                  <option value="mensal">Mensal</option>
                              </select>
                          </div>
                      </div>
                      <div id="receita-recorrente-fields" class="hidden mt-4 space-y-4">
                          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                              <div>
                                  <label for="receita-recorrencia-frequencia" class="block text-sm font-medium text-gray-700">Repetir a cada</label>
                                  <select id="receita-recorrencia-frequencia" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                      <option value="mensal">Mês</option>
                                      <option value="bimestral">Bimestre</option>
                                      <option value="trimestral">Trimestre</option>
                                      <option value="semestral">Semestre</option>
                                      <option value="anual">Ano</option>
                                  </select>
                              </div>
                          </div>
                          <div>
                              <label class="block text-sm font-medium text-gray-700">Fim da Recorrência</label>
                              <div class="mt-2 space-y-2">
                                  <div class="flex items-center">
                                      <input type="radio" id="receita-recorrencia-fim-data-radio" name="receita-recorrencia-fim" value="data" class="h-4 w-4 text-indigo-600 border-gray-300">
                                      <label for="receita-recorrencia-fim-data-radio" class="ml-3 block text-sm font-medium text-gray-700">Em:</label>
                                      <input type="date" id="receita-recorrencia-fim-data" class="form-input ml-2 block w-full rounded-md border-gray-300 shadow-sm">
                                  </div>
                                  <div class="flex items-center">
                                      <input type="radio" id="receita-recorrencia-fim-ocorrencias-radio" name="receita-recorrencia-fim" value="ocorrencias" class="h-4 w-4 text-indigo-600 border-gray-300">
                                      <label for="receita-recorrencia-fim-ocorrencias-radio" class="ml-3 block text-sm font-medium text-gray-700">Após:</label>
                                      <input type="number" id="receita-recorrencia-fim-ocorrencias" class="form-input ml-2 block w-24 rounded-md border-gray-300 shadow-sm">
                                      <span class="ml-2 text-sm text-gray-600">ocorrências</span>
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                          <div>
                              <label for="receita-emissao" class="block text-sm font-medium text-gray-700">Data de Emissão</label>
                              <input type="date" id="receita-emissao" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                          </div>
                          <div>
                              <label for="receita-competencia" class="block text-sm font-medium text-gray-700">Data de Competência</label>
                              <input type="date" id="receita-competencia" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required>
                          </div>
                          <div>
                              <label for="receita-vencimento" class="block text-sm font-medium text-gray-700">Data de Vencimento</label>
                              <input type="date" id="receita-vencimento" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required>
                          </div>
                      </div>
                  </div>

                  <div class="p-4 border rounded-md">
                      <div class="flex items-center">
                          <input id="marcar-recebido-checkbox" type="checkbox" class="h-4 w-4 text-[var(--primary-color)] focus:ring-[var(--primary-color)] border-gray-300 rounded">
                          <label for="marcar-recebido-checkbox" class="ml-2 block text-sm font-medium text-gray-900">Registrar recebimento inicial?</label>
                      </div>
                      <div id="recebimento-info" class="hidden mt-4 space-y-4">
                           <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label for="recebimento-data" class="block text-sm font-medium text-gray-700">Data do Recebimento</label>
                                    <input type="date" id="recebimento-data" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                </div>
                                <div>
                                    <label for="recebimento-valor" class="block text-sm font-medium text-gray-700">Valor Recebido</label>
                                    <input type="text" id="recebimento-valor" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" placeholder="0,00">
                                </div>
                                <div>
                                    <label for="recebimento-conta" class="block text-sm font-medium text-gray-700">Conta de Entrada</label>
                                    <select id="recebimento-conta" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                        <option value="">Selecione uma conta</option>
                                    </select>
                                </div>
                           </div>
                      </div>
                  </div>

                   <div class="p-4 border rounded-md">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Complementar</h4>
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label for="receita-obs" class="block text-sm font-medium text-gray-700">Observações / Notas</label>
                                <textarea id="receita-obs" rows="3" class="form-textarea mt-1 block w-full rounded-md border-gray-300 shadow-sm"></textarea>
                            </div>
                             <div>
                                <label for="receita-anexo" class="block text-sm font-medium text-gray-700">Anexar Comprovante ou Contrato</label>
                                <input type="file" id="receita-anexo" class="form-input mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-[var(--primary-color)] hover:file:bg-blue-100">
                            </div>
                        </div>
                   </div>

                  <div class="flex items-center justify-end pt-4 border-t space-x-4">
                      <button type="button" id="cancel-receita-modal-btn" class="bg-gray-200 text-gray-800 hover:bg-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Cancelar</button>
                      <button type="submit" class="text-white bg-[var(--primary-color)] hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Salvar Lançamento</button>
                  </div>
              </form>
          </div>
      </div>
  </div>

  <!-- Modal de Registro de Recebimento -->
  <div id="receber-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
      <div class="relative top-20 mx-auto p-5 border w-full max-w-xl shadow-lg rounded-md bg-white">
          <div class="flex justify-between items-center border-b pb-3">
              <h3 class="text-2xl font-bold text-gray-900">Registrar Recebimento</h3>
              <button id="close-receber-modal-btn" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                  <span class="material-symbols-outlined text-gray-600">close</span>
              </button>
          </div>
          <div class="mt-5">
              <form id="receber-form" class="space-y-6">
                  <input type="hidden" id="receber-receita-id">
                  <div class="p-4 border rounded-md space-y-4">
                      <h4 class="text-lg font-semibold text-gray-800 mb-4">Detalhes do Recebimento</h4>
                      <p id="saldo-pendente-display" class="text-lg font-medium text-gray-700">Saldo Pendente: <span class="font-bold text-blue-600">R$ 0,00</span></p>
                      <div>
                          <label for="receber-data" class="block text-sm font-medium text-gray-700">Data do Recebimento</label>
                          <input type="date" id="receber-data" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required>
                      </div>
                      <div>
                          <label for="receber-valor" class="block text-sm font-medium text-gray-700">Valor a Receber (R$)</label>
                          <input type="text" id="receber-valor" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" required placeholder="0,00">
                      </div>
                      <div>
                          <label for="receber-descontos" class="block text-sm font-medium text-gray-700">Descontos Concedidos (R$)</label>
                          <input type="text" id="receber-descontos" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" placeholder="0,00">
                      </div>
                      <div>
                          <label for="receber-juros-multa" class="block text-sm font-medium text-gray-700">Juros / Multa Recebidos (R$)</label>
                          <input type="text" id="receber-juros-multa" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm" placeholder="0,00">
                      </div>
                      <div>
                          <label for="receber-valor-final" class="block text-sm font-medium text-gray-700">Valor Final do Recebimento (R$)</label>
                          <input type="text" id="receber-valor-final" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm bg-gray-100" readonly>
                      </div>
                      <div>
                          <label for="receber-conta-entrada" class="block text-sm font-medium text-gray-700">Conta de Entrada</label>
                          <select id="receber-conta-entrada" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm" required>
                              <option value="">Selecione a conta de entrada</option>
                          </select>
                      </div>
                      <div>
                          <label for="receber-meio-pagamento" class="block text-sm font-medium text-gray-700">Meio de Pagamento</label>
                          <select id="receber-meio-pagamento" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                              <option>PIX</option>
                              <option>Boleto</option>
                              <option>Transferência (TED/DOC)</option>
                              <option>Cartão de Crédito</option>
                              <option>Dinheiro</option>
                          </select>
                      </div>
                  </div>
                  <div class="flex items-center justify-end pt-4 border-t space-x-4">
                      <button type="button" id="cancel-receber-modal-btn" class="bg-gray-200 text-gray-800 hover:bg-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Cancelar</button>
                      <button type="submit" class="text-white bg-[var(--primary-color)] hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Confirmar Recebimento</button>
                  </div>
              </form>
          </div>
      </div>
  </div>

  <!-- Modal de Visualização de Receita -->
  <div id="visualizar-receita-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
      <div class="relative top-10 mx-auto p-5 border w-full max-w-6xl shadow-lg rounded-md bg-white">
          <div class="flex justify-between items-center border-b pb-3">
              <h3 class="text-2xl font-bold text-gray-900">Detalhes da Receita</h3>
              <button id="close-visualizar-receita-modal-btn" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                  <span class="material-symbols-outlined text-gray-600">close</span>
              </button>
          </div>
          <div class="mt-5 grid grid-cols-1 md:grid-cols-3 gap-6">
              <div class="md:col-span-2 space-y-4">
                  <h4 class="text-lg font-semibold text-gray-800 border-b pb-2">Informações Gerais</h4>
                  <div><p class="text-sm text-gray-500">Descrição</p><p id="view-receita-descricao" class="text-base font-medium text-gray-800"></p></div>
                  <div><p class="text-sm text-gray-500">Cliente</p><p id="view-receita-cliente" class="text-base font-medium text-gray-800"></p></div>
                  <div><p class="text-sm text-gray-500">Categoria (Plano de Contas)</p><p id="view-receita-categoria" class="text-base font-medium text-gray-800"></p></div>
                  <div><p class="text-sm text-gray-500">Observações</p><p id="view-receita-obs" class="text-base text-gray-800 break-words"></p></div>

                  <h4 class="text-lg font-semibold text-gray-800 border-b pb-2 pt-4">Histórico de Transações</h4>
                  <div class="overflow-x-auto border rounded-lg">
                      <table class="min-w-full divide-y divide-gray-200">
                          <thead class="bg-gray-50">
                              <tr>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Tipo</th>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Data</th>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Valor</th>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Juros</th>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Descontos</th>
                                  <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Ação</th>
                              </tr>
                          </thead>
                          <tbody id="recebimentos-history-table-body" class="bg-white divide-y divide-gray-200">
                          </tbody>
                      </table>
                  </div>
              </div>
              <div class="space-y-4 bg-gray-50 p-4 rounded-lg border">
                  <h4 class="text-lg font-semibold text-gray-800 border-b pb-2">Resumo Financeiro</h4>
                  <div><p class="text-sm text-gray-500">Número do Documento</p><p id="view-receita-numero-documento" class="text-base font-medium text-gray-800"></p></div>
                  <div>
                      <p class="text-sm text-gray-500">Valor Original</p>
                      <p id="view-receita-valor-original" class="text-2xl font-bold text-blue-600"></p>
                  </div>
                  <div>
                      <p class="text-sm text-gray-500">Descontos Concedidos</p>
                      <p id="view-receita-descontos" class="text-2xl font-bold text-yellow-600"></p>
                  </div>
                  <div>
                      <p class="text-sm text-gray-500">Juros Recebidos</p>
                      <p id="view-receita-juros" class="text-2xl font-bold text-orange-600"></p>
                  </div>
                   <div>
                      <p class="text-sm text-gray-500">Total Recebido</p>
                      <p id="view-receita-total-recebido" class="text-2xl font-bold text-green-600"></p>
                  </div>
                  <div>
                      <p class="text-sm text-gray-500">Saldo Pendente</p>
                      <p id="view-receita-saldo-pendente" class="text-2xl font-bold text-red-600"></p>
                  </div>
                   <div>
                      <p class="text-sm text-gray-500">Status</p>
                      <p id="view-receita-status" class="text-base font-medium px-2 py-1 rounded-full inline-block"></p>
                  </div>
              </div>
          </div>
          <div class="flex items-center justify-end pt-4 mt-4 border-t space-x-4">
              <button type="button" id="ok-visualizar-receita-modal-btn" class="bg-gray-200 text-gray-800 hover:bg-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">OK</button>
          </div>
      </div>
  </div>

  <!-- Modal de Confirmação de Recebimento Parcial -->
  <div id="confirmar-recebimento-parcial-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
    <div class="relative top-20 mx-auto p-5 border w-full max-w-lg shadow-lg rounded-md bg-white">
        <div class="flex justify-between items-center border-b pb-3">
            <h3 class="text-2xl font-bold text-gray-900">Confirmar Recebimento Parcial</h3>
            <button id="close-confirmar-recebimento-parcial-btn" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                <span class="material-symbols-outlined text-gray-600">close</span>
            </button>
        </div>
        <div class="mt-5">
            <p id="confirmar-recebimento-parcial-mensagem" class="text-gray-700 text-base mb-4">O valor informado é menor que o saldo pendente. Deseja registrar um recebimento parcial? O saldo restante continuará em aberto.</p>
            <div class="space-y-4">
                <div>
                    <label for="parcial-recebimento-nova-data-vencimento" class="block text-sm font-medium text-gray-700">
                        Definir nova data de vencimento para o saldo restante? (Opcional)
                    </label>
                    <input type="date" id="parcial-recebimento-nova-data-vencimento" class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                </div>
            </div>
            <div class="flex items-center justify-end pt-4 mt-4 border-t space-x-4">
                <button type="button" id="cancelar-recebimento-parcial-btn" class="bg-gray-200 text-gray-800 hover:bg-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Cancelar</button>
                <button type="button" id="confirmar-recebimento-parcial-btn" class="text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Confirmar e Salvar</button>
            </div>
        </div>
    </div>
  </div>

  <!-- Modal de Desdobramento de Receita -->
  <div id="desdobrar-receita-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
    <div class="relative top-10 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white">
        <div class="flex justify-between items-center border-b pb-3">
            <h3 class="text-2xl font-bold text-gray-900">Desdobrar Título a Receber</h3>
            <button id="close-desdobrar-receita-modal-btn" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                <span class="material-symbols-outlined text-gray-600">close</span>
            </button>
        </div>
        <div class="mt-5">
            <form id="desdobrar-receita-form" class="space-y-6">
                <input type="hidden" id="desdobrar-receita-id-original">

                <!-- Seção de Informações do Título Original (Apenas Leitura) -->
                <div class="p-4 border rounded-md bg-gray-50">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">Título Original</h4>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-500">Cliente</label>
                            <p id="desdobrar-original-cliente" class="mt-1 text-base font-semibold text-gray-700"></p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-500">Descrição</label>
                            <p id="desdobrar-original-descricao" class="mt-1 text-base font-semibold text-gray-700"></p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-500">Vencimento Original</label>
                            <p id="desdobrar-original-vencimento" class="mt-1 text-base font-semibold text-gray-700"></p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-red-600">Saldo Pendente</label>
                            <p id="desdobrar-original-saldo" class="mt-1 text-xl font-bold text-red-600"></p>
                        </div>
                    </div>
                </div>

                <!-- Formulário para os Novos Títulos -->
                <div class="p-4 border rounded-md">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">Novos Títulos</h4>
                    <div class="mb-4">
                        <label for="desdobrar-numero-parcelas" class="block text-sm font-medium text-gray-700">Dividir em quantas parcelas?</label>
                        <input type="number" id="desdobrar-numero-parcelas" class="form-input mt-1 block w-32 rounded-md border-gray-300 shadow-sm" min="2">
                    </div>

                    <!-- Tabela para as novas parcelas -->
                    <div id="desdobrar-parcelas-container" class="overflow-x-auto">
                        <!-- As linhas da tabela serão geradas dinamicamente aqui -->
                    </div>

                    <!-- Validação do Total -->
                    <div class="mt-4 pt-4 border-t flex justify-end items-center gap-4">
                         <div id="desdobrar-validacao-total" class="text-base font-semibold">
                            <span class="text-gray-600">Soma das Parcelas:</span>
                            <span id="desdobrar-soma-parcelas" class="text-gray-800">R$ 0,00</span>
                        </div>
                        <div id="desdobrar-feedback" class="text-sm font-medium"></div>
                    </div>
                </div>

                <div class="flex items-center justify-end pt-4 border-t space-x-4">
                    <button type="button" id="cancel-desdobrar-receita-btn" class="bg-gray-200 text-gray-800 hover:bg-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Cancelar</button>
                    <button type="submit" id="submit-desdobrar-receita-btn" class="text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center disabled:opacity-50 disabled:cursor-not-allowed" disabled>Salvar Desdobramento</button>
                </div>
            </form>
        </div>
    </div>
  </div>

  <!-- Container da Tela Financeiro - Fluxo de Caixa -->
  <div id="fluxo-de-caixa-page" class="view-container min-h-screen w-full">
     <div class="relative flex size-full min-h-screen flex-col group/design-root w-full">
        <div class="layout-container flex h-full grow flex-col w-full">
            <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-gray-200 bg-white px-10 py-3">
                <a href="#" class="flex items-center gap-4 text-gray-800 nav-link" data-target="main-page">
                    <div class="size-8 text-[var(--primary-color)]">
                        <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M4 8L24 4L44 8L24 12L4 8Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path><path d="M4 24L24 20L44 24L24 28L4 24Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path><path d="M4 40L24 36L44 40L24 44L4 40Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"></path></svg>
                    </div>
                    <h2 class="text-gray-800 text-lg font-semibold leading-tight tracking-[-0.015em]">ArchSys</h2>
                </a>
                <nav class="flex items-center gap-8">
                    <a class="nav-link text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#" data-target="main-page">Painel</a>
                    <a class="nav-link text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#" data-target="cadastros-page">Cadastros</a>
                    <a class="text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#">Compras</a>
                    <div class="relative">
                        <button id="financeiro-nav-link-fluxo" class="text-[var(--primary-color)] text-sm font-medium leading-normal flex items-center gap-1">
                            <span>Financeiro</span>
                            <span class="material-symbols-outlined text-base">expand_more</span>
                        </button>
                        <div id="financeiro-dropdown-fluxo" class="hidden absolute mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20">
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="contas-a-pagar-page">Contas a Pagar</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="contas-a-receber-page">Contas a Receber</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="fluxo-de-caixa-page">Fluxo de Caixa</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="movimentacao-bancaria-page">Conciliação Bancária</a>
                            <a href="#" class="nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-target="relatorios-page">Relatórios</a>
                        </div>
                    </div>
                    <a class="text-gray-600 hover:text-[var(--primary-color)] text-sm font-medium leading-normal transition-colors" href="#">Vendas</a>
                </nav>
                 <div class="flex items-center gap-4">
                    <button id="notification-bell-fluxo" class="relative rounded-full p-2 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary-color)]">
                        <span class="material-symbols-outlined text-gray-600">notifications</span>
                        <span id="notification-indicator-fluxo" class="hidden absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"></span>
                    </button>
                    <div class="relative">
                        <button id="profile-button-fluxo" class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" style='background-image: url("https://placehold.co/40x40/E2E8F0/4A5568?text=U");'></button>
                        <div id="profile-dropdown-fluxo" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10">
                            <div class="px-4 py-2 text-sm text-gray-700 border-b">
                                <p class="font-medium">Logado como:</p>
                                <p id="user-email-fluxo" class="truncate"></p>
                            </div>
                            <a href="#" id="logout-button-fluxo" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sair</a>
                        </div>
                    </div>
                </div>
            </header>
            <main class="flex-1 px-10 py-8 bg-gray-50">
                <div class="layout-content-container mx-auto flex max-w-7xl flex-col gap-8">
                    <div class="flex justify-between items-center">
                        <div class="flex flex-col gap-2">
                            <h1 class="text-gray-900 text-3xl font-bold leading-tight tracking-tight">Fluxo de Caixa</h1>
                            <p class="text-gray-600 text-base font-normal leading-normal">Acompanhe a saúde financeira da sua empresa.</p>
                        </div>
                        <div>
                            <button id="lancar-transferencia-btn" class="inline-flex items-center justify-center rounded-md bg-cyan-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500">
                                <span class="material-symbols-outlined mr-2">swap_horiz</span>
                                Transferência
                            </button>
                        </div>
                    </div>

                    <!-- A. Painel de Filtros -->
                    <div class="flex flex-wrap items-end gap-4 p-4 bg-white rounded-lg border shadow-sm">
                        <div class="flex-grow">
                            <label for="fluxo-periodo-de" class="block text-sm font-medium text-gray-700">Período de:</label>
                            <input type="date" id="fluxo-periodo-de" class="form-input mt-1 block w-full">
                        </div>
                        <div class="flex-grow">
                            <label for="fluxo-periodo-ate" class="block text-sm font-medium text-gray-700">Até:</label>
                            <input type="date" id="fluxo-periodo-ate" class="form-input mt-1 block w-full">
                        </div>
                        <div class="flex-grow">
                            <label for="fluxo-conta-bancaria" class="block text-sm font-medium text-gray-700">Conta Bancária</label>
                            <select id="fluxo-conta-bancaria" class="form-select mt-1 block w-full">
                                <option value="todas">Todas as Contas</option>
                                <!-- Options will be populated by JS -->
                            </select>
                        </div>
                        <div>
                           <label class="block text-sm font-medium text-gray-700">Conciliação</label>
                           <div id="fluxo-conciliacao-filter-group" class="flex items-center gap-2 mt-1">
                               <button data-status="todas" class="status-filter-btn active px-3 py-1 text-sm font-medium rounded-md">Todas</button>
                               <button data-status="conciliadas" class="status-filter-btn px-3 py-1 text-sm font-medium rounded-md">Conciliadas</button>
                               <button data-status="nao_conciliadas" class="status-filter-btn px-3 py-1 text-sm font-medium rounded-md">Não Conciliadas</button>
                           </div>
                        </div>
                        <div class="border-l pl-4 ml-4">
                           <label class="block text-sm font-medium text-gray-700">Visão</label>
                           <div id="fluxo-visao-filter-group" class="flex items-center gap-4 mt-1">
                               <div class="flex items-center">
                                   <input id="visao-realizado-checkbox" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" checked>
                                   <label for="visao-realizado-checkbox" class="ml-2 block text-sm text-gray-900">Realizado</label>
                               </div>
                               <div class="flex items-center">
                                   <input id="visao-projetado-checkbox" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                   <label for="visao-projetado-checkbox" class="ml-2 block text-sm text-gray-900">Projetado</label>
                               </div>
                           </div>
                        </div>
                    </div>

                    <!-- B. Visão Geral / KPIs -->
                    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-5">
                        <div class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                           <p class="text-gray-600 text-base font-medium leading-normal">Saldo Anterior</p>
                           <p id="kpi-saldo-anterior" class="text-gray-900 text-2xl font-bold leading-tight">R$ 0,00</p>
                        </div>
                        <div class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                           <p class="text-green-600 text-base font-medium leading-normal">(+) Entradas</p>
                           <p id="kpi-total-entradas" class="text-green-700 text-2xl font-bold leading-tight">R$ 0,00</p>
                        </div>
                        <div class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                           <p class="text-red-600 text-base font-medium leading-normal">(-) Saídas</p>
                           <p id="kpi-total-saidas" class="text-red-700 text-2xl font-bold leading-tight">R$ 0,00</p>
                        </div>
                        <div class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                           <p class="text-gray-600 text-base font-medium leading-normal">(=) Resultado</p>
                           <p id="kpi-resultado-liquido" class="text-gray-900 text-2xl font-bold leading-tight">R$ 0,00</p>
                        </div>
                        <div class="flex flex-col gap-2 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                           <p class="text-blue-600 text-base font-medium leading-normal">(=) Saldo Final</p>
                           <p id="kpi-saldo-final" class="text-blue-700 text-2xl font-bold leading-tight">R$ 0,00</p>
                        </div>
                    </div>

                    <!-- C. Área de Detalhamento -->
                    <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm w-full">
                        <!-- Abas de Navegação -->
                        <div class="border-b border-gray-200">
                            <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                                <a href="#" class="fluxo-tab-link active border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-fluxo-tab="extrato">Extrato</a>
                                <a href="#" class="fluxo-tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-fluxo-tab="gerencial">Gerencial (DRE)</a>
                                <a href="#" class="fluxo-tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-fluxo-tab="graficos">Gráficos</a>
                                <a href="#" class="fluxo-tab-link border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-fluxo-tab="what-if">What-If</a>
                            </nav>
                        </div>

                        <div class="mt-6">
                            <!-- Aba 1: Extrato -->
                            <div id="fluxo-extrato-tab" class="fluxo-tab-content">
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="p-4"><input id="fluxo-select-all-checkbox" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"></th>
                                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Data Trans.</th>
                                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Descrição</th>
                                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Participante</th>
                                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Plano de Conta</th>
                                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Vencimento</th>
                                                <th class="px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase">Entrada</th>
                                                <th class="px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase">Saída</th>
                                                <th class="px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase">Juros</th>
                                                <th class="px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase">Desconto</th>
                                                <th class="px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase">Saldo</th>
                                            </tr>
                                        </thead>
                                        <tbody id="fluxo-extrato-table-body" class="bg-white divide-y divide-gray-200">
                                           <!-- Linhas do extrato serão inseridas aqui -->
                                           <tr><td colspan="12" class="text-center p-8 text-gray-500">Selecione os filtros para carregar os dados.</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Aba 2: Gerencial (DRE de Caixa) -->
                            <div id="fluxo-gerencial-tab" class="fluxo-tab-content hidden">
                                <div class="overflow-x-auto">
                                   <table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Descrição</th>
                                                <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Valor</th>
                                                <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">% sobre Total</th>
                                            </tr>
                                        </thead>
                                        <tbody id="fluxo-dre-table-body" class="bg-white divide-y divide-gray-200">
                                           <!-- Linhas do DRE serão inseridas aqui -->
                                           <tr><td colspan="3" class="text-center p-8 text-gray-500">Selecione os filtros para carregar os dados.</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Aba 3: Gráficos -->
                            <div id="fluxo-graficos-tab" class="fluxo-tab-content hidden">
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    <!-- Gráfico 1: Receita X Despesa Mensal -->
                                    <div class="p-6 border rounded-lg shadow-sm bg-white col-span-1 lg:col-span-2">
                                        <h4 class="text-xl font-semibold text-gray-800 mb-4">Receita vs. Despesa Mensal</h4>
                                        <p class="text-sm text-gray-500 mb-4">Comparativo mensal entre o total de entradas e saídas no período selecionado.</p>
                                        <canvas id="chart-receita-vs-despesa"></canvas>
                                    </div>

                                    <!-- Gráfico 2: Acumulado Mensal -->
                                    <div class="p-6 border rounded-lg shadow-sm bg-white col-span-1 lg:col-span-2">
                                        <h4 class="text-xl font-semibold text-gray-800 mb-4">Crescimento Acumulado</h4>
                                        <p class="text-sm text-gray-500 mb-4">Trajetória do total de receitas e despesas somadas ao longo do período.</p>
                                        <canvas id="chart-acumulado-mensal"></canvas>
                                    </div>

                                    <!-- Gráfico 3: Evolução do Saldo da Conta -->
                                    <div class="p-6 border rounded-lg shadow-sm bg-white col-span-1 lg:col-span-2">
                                        <h4 class="text-xl font-semibold text-gray-800 mb-4">Evolução do Saldo de Caixa</h4>
                                        <p class="text-sm text-gray-500 mb-4">Projeção do saldo de caixa, combinando valores realizados e futuros.</p>
                                        <canvas id="chart-evolucao-saldo"></canvas>
                                    </div>

                                    <!-- Gráfico 4: Análise de Despesas por Categoria -->
                                    <div class="p-6 border rounded-lg shadow-sm bg-white col-span-1 lg:col-span-2">
                                        <h4 class="text-xl font-semibold text-gray-800 mb-4">Análise de Despesas por Categoria</h4>
                                         <p class="text-sm text-gray-500 mb-4">Evolução dos gastos nas principais categorias ao longo do tempo.</p>
                                        <canvas id="chart-despesas-categoria"></canvas>
                                    </div>

                                    <!-- Gráfico 5: Top 5 Despesas e Receitas -->
                                    <div class="p-6 border rounded-lg shadow-sm bg-white col-span-1">
                                       <h4 class="text-xl font-semibold text-gray-800 mb-4">Top 5 Fontes de Receita</h4>
                                       <p class="text-sm text-gray-500 mb-4">Maiores entradas por cliente ou categoria no período.</p>
                                       <canvas id="chart-top-5-receitas"></canvas>
                                    </div>
                                    <div class="p-6 border rounded-lg shadow-sm bg-white col-span-1">
                                       <h4 class="text-xl font-semibold text-gray-800 mb-4">Top 5 Despesas</h4>
                                       <p class="text-sm text-gray-500 mb-4">Maiores saídas por favorecido ou categoria no período.</p>
                                       <canvas id="chart-top-5-despesas"></canvas>
                                    </div>

                                    <!-- Gráfico 6: Comparativo de Períodos -->
                                    <div class="p-6 border rounded-lg shadow-sm bg-white col-span-1 lg:col-span-2">
                                        <h4 class="text-xl font-semibold text-gray-800 mb-4">Comparativo de Período</h4>
                                        <p class="text-sm text-gray-500 mb-4">Análise das entradas e saídas do período atual contra o período anterior equivalente.</p>
                                        <canvas id="chart-comparativo-periodos"></canvas>
                                    </div>
                                </div>
                            </div>

                            <!-- Aba 4: What-If -->
                            <div id="fluxo-what-if-tab" class="fluxo-tab-content hidden">
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                    <!-- Coluna Esquerda: Gráfico e Cenários Salvos -->
                                    <div class="lg:col-span-2 space-y-8">
                                        <!-- Card do Fluxo de Caixa Projetado -->
                                        <div class="p-6 border rounded-lg shadow-sm bg-white">
                                            <div classs="flex justify-between items-center mb-4">
                                                <h4 class="text-xl font-semibold text-gray-800">Fluxo de Caixa Projetado</h4>
                                                <p id="what-if-cenario-title" class="text-sm text-gray-500">Cenário: Nenhum</p>
                                            </div>
                                            <div class="mt-4">
                                                <canvas id="chart-what-if-evolucao-saldo"></canvas>
                                            </div>
                                            <div class="mt-6 grid grid-cols-4 gap-4 text-center">
                                                <div>
                                                    <p class="text-sm text-gray-500">Saldo Inicial</p>
                                                    <p id="what-if-saldo-inicial" class="text-lg font-bold text-gray-800">R$ 0,00</p>
                                                </div>
                                                <div>
                                                    <p class="text-sm text-gray-500">Saldo Projetado (Base)</p>
                                                    <p id="what-if-saldo-projetado" class="text-lg font-bold text-blue-600">R$ 0,00</p>
                                                </div>
                                                <div>
                                                    <p class="text-sm text-gray-500">Saldo Simulado</p>
                                                    <p id="what-if-saldo-simulado" class="text-lg font-bold text-green-600">R$ 0,00</p>
                                                </div>
                                                <div>
                                                    <p class="text-sm text-gray-500">Saldo Comparado</p>
                                                    <p id="what-if-saldo-comparado" class="text-lg font-bold text-purple-600">R$ 0,00</p>
                                                </div>
                                            </div>
                                            <div class="mt-4 flex items-center justify-center">
                                                <input id="what-if-include-projections" type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded" checked>
                                                <label for="what-if-include-projections" class="ml-2 block text-sm text-gray-900">
                                                  Incluir Projeções no Cenário Base
                                                </label>
                                            </div>
                                        </div>

                                        <!-- Card de Cenários Salvos -->
                                        <div class="p-6 border rounded-lg shadow-sm bg-white">
                                            <h4 class="text-xl font-semibold text-gray-800 mb-4">Cenários Salvos</h4>
                                            <div id="cenarios-salvos-list" class="space-y-2">
                                                <!-- Scenarios will be rendered here by JS -->
                                                <div class="flex justify-between items-center p-2 rounded-md bg-gray-50">
                                                    <span class="font-medium text-gray-700">Exemplo: Contratação de 2 Devs</span>
                                                    <div class="flex items-center space-x-2">
                                                        <input type="checkbox" class="form-checkbox h-4 w-4 text-purple-600 what-if-compare-checkbox" data-scenario-id="exemplo1">
                                                        <label class="text-sm text-gray-600">Comparar</label>
                                                        <button class="text-sm text-blue-600 hover:underline">Carregar</button>
                                                        <button class="text-sm text-red-600 hover:underline">Excluir</button>
                                                    </div>
                                                </div>
                                                <p class="text-center text-gray-500 hidden">Nenhum cenário salvo ainda.</p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Coluna Direita: Simulador -->
                                    <div class="lg:col-span-1 p-6 border rounded-lg shadow-sm bg-white h-fit">
                                        <h4 class="text-xl font-semibold text-gray-800 mb-4">Simular Novo Cenário</h4>

                                        <!-- Form Adicionar Receita -->
                                        <form id="what-if-receita-form" class="space-y-4 mb-6">
                                            <h5 class="font-semibold text-green-700">Adicionar Receita Futura</h5>
                                            <div>
                                                <label for="what-if-receita-descricao" class="block text-sm font-medium text-gray-700">Descrição</label>
                                                <input type="text" id="what-if-receita-descricao" class="form-input mt-1 block w-full" placeholder="Ex: Novo Projeto Y">
                                            </div>
                                            <div class="grid grid-cols-2 gap-4">
                                                <div>
                                                    <label for="what-if-receita-valor" class="block text-sm font-medium text-gray-700">Valor (R$)</label>
                                                    <input type="text" id="what-if-receita-valor" class="form-input mt-1 block w-full" placeholder="5000">
                                                </div>
                                                <div>
                                                    <label for="what-if-receita-forma-pagamento" class="block text-sm font-medium text-gray-700">Forma</label>
                                                    <select id="what-if-receita-forma-pagamento" class="form-select mt-1 block w-full">
                                                        <option value="single">Única</option>
                                                        <option value="installment">Parcelado</option>
                                                        <option value="recurring">Recorrente</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div id="what-if-receita-installment-fields" class="hidden grid grid-cols-2 gap-4">
                                                <div>
                                                    <label for="what-if-receita-installments" class="block text-sm font-medium text-gray-700">Parcelas</label>
                                                    <input type="number" id="what-if-receita-installments" class="form-input mt-1 block w-full" placeholder="3">
                                                </div>
                                                <div>
                                                    <label for="what-if-receita-installment-interval" class="block text-sm font-medium text-gray-700">Intervalo</label>
                                                    <select id="what-if-receita-installment-interval" class="form-select mt-1 block w-full">
                                                        <option value="30">30 dias</option>
                                                        <option value="mensal">Mensal</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div id="what-if-receita-recurring-fields" class="hidden grid grid-cols-2 gap-4">
                                                <div>
                                                    <label for="what-if-receita-recurrences" class="block text-sm font-medium text-gray-700">Ocorrências</label>
                                                    <input type="number" id="what-if-receita-recurrences" class="form-input mt-1 block w-full" placeholder="12">
                                                </div>
                                                <div>
                                                    <label for="what-if-receita-recurring-frequency" class="block text-sm font-medium text-gray-700">Frequência</label>
                                                    <select id="what-if-receita-recurring-frequency" class="form-select mt-1 block w-full">
                                                        <option value="mensal">Mensal</option>
                                                        <option value="bimestral">Bimestral</option>
                                                        <option value="trimestral">Trimestral</option>
                                                        <option value="semestral">Semestral</option>
                                                        <option value="anual">Anual</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div>
                                                <label for="what-if-receita-data" class="block text-sm font-medium text-gray-700">Data de Início</label>
                                                <input type="date" id="what-if-receita-data" class="form-input mt-1 block w-full">
                                            </div>
                                            <button type="submit" class="w-full inline-flex items-center justify-center rounded-md bg-green-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-600">
                                                <span class="material-symbols-outlined mr-2">add</span> Adicionar Receita
                                            </button>
                                        </form>

                                        <!-- Form Adicionar Despesa -->
                                        <form id="what-if-despesa-form" class="space-y-4">
                                            <h5 class="font-semibold text-red-700">Adicionar Despesa Futura</h5>
                                            <div>
                                                <label for="what-if-despesa-descricao" class="block text-sm font-medium text-gray-700">Descrição</label>
                                                <input type="text" id="what-if-despesa-descricao" class="form-input mt-1 block w-full" placeholder="Ex: Salário Dev Jr.">
                                            </div>
                                             <div class="grid grid-cols-2 gap-4">
                                                <div>
                                                    <label for="what-if-despesa-valor" class="block text-sm font-medium text-gray-700">Valor (R$)</label>
                                                    <input type="text" id="what-if-despesa-valor" class="form-input mt-1 block w-full" placeholder="3500">
                                                </div>
                                                <div>
                                                    <label for="what-if-despesa-forma-pagamento" class="block text-sm font-medium text-gray-700">Forma</label>
                                                    <select id="what-if-despesa-forma-pagamento" class="form-select mt-1 block w-full">
                                                        <option value="single">Única</option>
                                                        <option value="installment">Parcelado</option>
                                                        <option value="recurring">Recorrente</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div id="what-if-despesa-installment-fields" class="hidden grid grid-cols-2 gap-4">
                                                <div>
                                                    <label for="what-if-despesa-installments" class="block text-sm font-medium text-gray-700">Parcelas</label>
                                                    <input type="number" id="what-if-despesa-installments" class="form-input mt-1 block w-full" placeholder="3">
                                                </div>
                                                <div>
                                                    <label for="what-if-despesa-installment-interval" class="block text-sm font-medium text-gray-700">Intervalo</label>
                                                    <select id="what-if-despesa-installment-interval"